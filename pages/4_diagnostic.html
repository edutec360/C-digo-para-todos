<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Diagn√≥stico - C√≥digo para Todos</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <div class="logo-icon">
                    <i class="fas fa-code"></i>
                </div>
                <span class="logo-text">C√≥digo para Todos</span>
            </div>
            <div class="nav-info">
                <span class="user-name">¬°Hola, <span id="userName">Estudiante</span>!</span>
            </div>
        </div>
    </nav>

    <!-- Main Container -->
    <main class="diagnostic-container">
        <!-- Welcome Screen -->
        <div class="screen active" id="welcomeScreen">
            <div class="welcome-content">
                <div class="welcome-header">
                    <div class="welcome-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h1>Examen Diagn√≥stico Inteligente</h1>
                    <p class="welcome-subtitle">Vamos a conocerte mejor para personalizar tu experiencia de aprendizaje</p>
                </div>

                <div class="welcome-features">
                    <div class="feature-item">
                        <i class="fas fa-adaptive-icon"></i>
                        <h3>Adaptativo</h3>
                        <p>Se ajusta a tu nivel en tiempo real</p>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-clock"></i>
                        <h3>Flexible</h3>
                        <p>Toma el tiempo que necesites</p>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-target"></i>
                        <h3>Personalizado</h3>
                        <p>Contenido dise√±ado para ti</p>
                    </div>
                </div>

                <div class="welcome-info">
                    <div class="info-card">
                        <h4>¬øC√≥mo funciona?</h4>
                        <ul>
                            <li>Responde preguntas sobre tus conocimientos</li>
                            <li>El sistema se adapta a tus respuestas</li>
                            <li>Recibe contenido personalizado para tu nivel</li>
                        </ul>
                    </div>
                </div>

                <button class="btn-primary btn-large" id="startExam">
                    <i class="fas fa-play"></i>
                    Comenzar Diagn√≥stico
                </button>
            </div>
        </div>

        <!-- Question Screen -->
        <div class="screen" id="questionScreen">
            <div class="question-container">
                <!-- Progress Header -->
                <div class="progress-header">
                    <div class="progress-info">
                        <span class="progress-text">Pregunta <span id="currentQuestion">1</span></span>
                        <span class="ai-status" id="aiStatus">
                            <i class="fas fa-brain pulse"></i>
                            Analizando tu nivel...
                        </span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>

                <!-- Question Content -->
                <div class="question-content">
                    <div class="question-header">
                        <h2 class="question-title" id="questionTitle">¬øCu√°l es tu experiencia previa en programaci√≥n?</h2>
                        <p class="question-description" id="questionDescription">Esta informaci√≥n nos ayuda a personalizar tu experiencia</p>
                    </div>

                    <!-- Multiple Choice Questions -->
                    <div class="question-type" id="multipleChoice">
                        <div class="options-container" id="optionsContainer">
                            <div class="option" data-value="none">
                                <div class="option-content">
                                    <div class="option-icon">
                                        <i class="fas fa-seedling"></i>
                                    </div>
                                    <div class="option-text">
                                        <h4>Nunca he programado</h4>
                                        <p>Soy completamente nuevo en programaci√≥n</p>
                                    </div>
                                </div>
                            </div>
                            <div class="option" data-value="little">
                                <div class="option-content">
                                    <div class="option-icon">
                                        <i class="fas fa-leaf"></i>
                                    </div>
                                    <div class="option-text">
                                        <h4>Muy poco</h4>
                                        <p>He visto algunos videos o tutoriales</p>
                                    </div>
                                </div>
                            </div>
                            <div class="option" data-value="some">
                                <div class="option-content">
                                    <div class="option-icon">
                                        <i class="fas fa-tree"></i>
                                    </div>
                                    <div class="option-text">
                                        <h4>Algo de experiencia</h4>
                                        <p>He escrito algunos programas b√°sicos</p>
                                    </div>
                                </div>
                            </div>
                            <div class="option" data-value="moderate">
                                <div class="option-content">
                                    <div class="option-icon">
                                        <i class="fas fa-forest"></i>
                                    </div>
                                    <div class="option-text">
                                        <h4>Experiencia moderada</h4>
                                        <p>Conozco varios lenguajes y conceptos</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Code Editor Questions -->
                    <div class="question-type" id="codeEditor" style="display: none;">
                        <div class="code-question-content">
                            <div class="code-instructions" id="codeInstructions">
                                <h4>Completa el siguiente c√≥digo</h4>
                                <p>Escribe el c√≥digo que falta para que el programa funcione correctamente</p>
                            </div>
                            
                            <div class="code-editor-container">
                                <div class="editor-header">
                                    <div class="editor-tabs">
                                        <div class="tab active">
                                            <i class="fab fa-java"></i>
                                            <span>MiPrograma.java</span>
                                        </div>
                                    </div>
                                    <div class="editor-actions">
                                        <button class="btn-secondary btn-small" id="resetCode">
                                            <i class="fas fa-undo"></i>
                                            Resetear
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="code-editor" id="codeEditorContent">
                                    <div class="line-numbers" id="lineNumbers">
                                        <span>1</span>
                                        <span>2</span>
                                        <span>3</span>
                                        <span>4</span>
                                        <span>5</span>
                                    </div>
                                    <textarea class="code-input" id="codeInput" placeholder="// Escribe tu c√≥digo aqu√≠..." spellcheck="false"></textarea>
                                </div>
                                
                                <div class="code-feedback" id="codeFeedback">
                                    <div class="feedback-item success" style="display: none;">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Sintaxis correcta</span>
                                    </div>
                                    <div class="feedback-item error" style="display: none;">
                                        <i class="fas fa-exclamation-triangle"></i>
                                        <span id="errorMessage">Error en la l√≠nea 3</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="question-navigation">
                    <button class="btn-secondary" id="prevBtn" style="opacity: 0.5; pointer-events: none;">
                        <i class="fas fa-arrow-left"></i>
                        Anterior
                    </button>
                    <button class="btn-primary" id="nextBtn" disabled>
                        Siguiente
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Processing Screen -->
        <div class="screen" id="processingScreen">
            <div class="processing-content">
                <div class="processing-animation">
                    <div class="brain-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="processing-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
                
                <h2>Analizando tus respuestas</h2>
                <p class="processing-text" id="processingText">Nuestra IA est√° procesando tu perfil de aprendizaje...</p>
                
                <div class="processing-steps">
                    <div class="step completed">
                        <i class="fas fa-check"></i>
                        <span>Respuestas recopiladas</span>
                    </div>
                    <div class="step processing">
                        <i class="fas fa-cog fa-spin"></i>
                        <span>Analizando patrones</span>
                    </div>
                    <div class="step">
                        <i class="fas fa-lightbulb"></i>
                        <span>Generando recomendaciones</span>
                    </div>
                    <div class="step">
                        <i class="fas fa-rocket"></i>
                        <span>Preparando contenido</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results Screen -->
        <div class="screen" id="resultsScreen">
            <div class="results-content">
                <div class="results-header">
                    <div class="results-celebration">
                        <div class="celebration-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <h1>¬°Diagn√≥stico Completado!</h1>
                        <p class="celebration-text">Hemos creado tu perfil de aprendizaje personalizado</p>
                    </div>
                </div>

                <div class="results-main">
                    <div class="level-card">
                        <div class="level-badge">
                            <div class="badge-icon" id="levelIcon">
                                <i class="fas fa-seedling"></i>
                            </div>
                            <div class="badge-text">
                                <h3>Tu Nivel</h3>
                                <h2 id="userLevel">Principiante</h2>
                                <p id="levelDescription">Perfecto para comenzar desde los fundamentos</p>
                            </div>
                        </div>
                    </div>

                    <div class="results-grid">
                        <div class="result-card">
                            <div class="card-header">
                                <i class="fas fa-star"></i>
                                <h4>Fortalezas</h4>
                            </div>
                            <div class="card-content">
                                <ul id="strengthsList">
                                    <li>Motivaci√≥n para aprender</li>
                                    <li>Pensamiento l√≥gico</li>
                                </ul>
                            </div>
                        </div>

                        <div class="result-card">
                            <div class="card-header">
                                <i class="fas fa-target"></i>
                                <h4>√Åreas de Enfoque</h4>
                            </div>
                            <div class="card-content">
                                <ul id="focusAreasList">
                                    <li>Sintaxis b√°sica de Java</li>
                                    <li>Conceptos fundamentales</li>
                                    <li>Pr√°ctica con ejercicios</li>
                                </ul>
                            </div>
                        </div>

                        <div class="result-card">
                            <div class="card-header">
                                <i class="fas fa-map-marked-alt"></i>
                                <h4>Tu Ruta de Aprendizaje</h4>
                            </div>
                            <div class="card-content">
                                <div class="learning-path">
                                    <div class="path-step active">
                                        <span class="step-number">1</span>
                                        <span class="step-text">Introducci√≥n a Java</span>
                                    </div>
                                    <div class="path-step">
                                        <span class="step-number">2</span>
                                        <span class="step-text">Variables y Tipos</span>
                                    </div>
                                    <div class="path-step">
                                        <span class="step-number">3</span>
                                        <span class="step-text">Estructuras de Control</span>
                                    </div>
                                    <div class="path-step">
                                        <span class="step-number">4</span>
                                        <span class="step-text">Ejercicios Pr√°cticos</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="result-card stats-card">
                            <div class="card-header">
                                <i class="fas fa-chart-line"></i>
                                <h4>Estad√≠sticas</h4>
                            </div>
                            <div class="card-content">
                                <div class="stats-grid">
                                    <div class="stat-item">
                                        <span class="stat-number" id="questionsAnswered">12</span>
                                        <span class="stat-label">Preguntas</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-number" id="timeSpent">8m</span>
                                        <span class="stat-label">Tiempo</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-number" id="accuracyRate">75%</span>
                                        <span class="stat-label">Precisi√≥n</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="results-actions">
                    <button class="btn-primary btn-large" id="startLearning">
                        <i class="fas fa-rocket"></i>
                        ¬°Comenzar mi Aprendizaje!
                    </button>
                    <button class="btn-secondary" id="retakeExam">
                        <i class="fas fa-redo"></i>
                        Repetir Diagn√≥stico
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>Cargando siguiente pregunta...</p>
        </div>
    </div>

    <style>
        /* CSS se copiar√° aqu√≠ */
        /* Reset y Variables */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary-blue: #4A90E2;
    --primary-green: #7ED321;
    --accent-pink: #FF6B9D;
    --accent-yellow: #F5A623;
    --neutral-light: #F8F9FA;
    --neutral-dark: #2C3E50;
    --success: #27AE60;
    --warning: #F39C12;
    --error: #E74C3C;
    --text-dark: #2C3E50;
    --text-light: #7F8C8D;
    --white: #FFFFFF;
    --border: #E1E8ED;
    --shadow: 0 4px 20px rgba(0,0,0,0.1);
    --shadow-hover: 0 8px 30px rgba(0,0,0,0.15);
    --border-radius: 12px;
    --transition: all 0.3s ease;
    --code-bg: #1e1e1e;
    --code-text: #d4d4d4;
}

body {
    font-family: 'Inter', sans-serif;
    line-height: 1.6;
    color: var(--text-dark);
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    min-height: 100vh;
}

/* Navigation */
.navbar {
    position: fixed;
    top: 0;
    width: 100%;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    z-index: 1000;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

.nav-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 1rem 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.nav-logo {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 600;
    font-size: 1.2rem;
    color: var(--text-dark);
}

.logo-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, var(--primary-blue), var(--primary-green));
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
}

.nav-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.user-name {
    color: var(--text-light);
    font-weight: 500;
}

/* Main Container */
.diagnostic-container {
    padding-top: 80px;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Screen Management */
.screen {
    display: none;
    width: 100%;
    max-width: 1000px;
    margin: 0 auto;
    padding: 2rem;
    animation: fadeIn 0.5s ease;
}

.screen.active {
    display: block;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Welcome Screen */
.welcome-content {
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
}

.welcome-header {
    margin-bottom: 3rem;
}

.welcome-icon {
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, var(--primary-blue), var(--primary-green));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 2rem;
    font-size: 3rem;
    color: white;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

.welcome-content h1 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: var(--text-dark);
}

.welcome-subtitle {
    font-size: 1.2rem;
    color: var(--text-light);
    margin-bottom: 2rem;
}

.welcome-features {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2rem;
    margin-bottom: 3rem;
}

.feature-item {
    background: white;
    padding: 2rem;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    transition: var(--transition);
}

.feature-item:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-hover);
}

.feature-item i {
    font-size: 2.5rem;
    color: var(--primary-blue);
    margin-bottom: 1rem;
}

.feature-item h3 {
    font-size: 1.3rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: var(--text-dark);
}

.feature-item p {
    color: var(--text-light);
    font-size: 0.9rem;
}

.welcome-info {
    margin-bottom: 3rem;
}

.info-card {
    background: white;
    padding: 2rem;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    text-align: left;
    max-width: 500px;
    margin: 0 auto;
}

.info-card h4 {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--text-dark);
}

.info-card ul {
    list-style: none;
}

.info-card li {
    padding: 0.5rem 0;
    color: var(--text-light);
    position: relative;
    padding-left: 2rem;
}

.info-card li::before {
    content: "‚úì";
    position: absolute;
    left: 0;
    color: var(--success);
    font-weight: bold;
}

/* Question Screen */
.question-container {
    background: white;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    overflow: hidden;
}

.progress-header {
    background: var(--neutral-light);
    padding: 1.5rem 2rem;
    border-bottom: 1px solid var(--border);
}

.progress-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.progress-text {
    font-weight: 600;
    color: var(--text-dark);
}

.ai-status {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--primary-blue);
    font-size: 0.9rem;
    font-weight: 500;
}

.ai-status i {
    animation: pulse 1.5s infinite;
}

.progress-bar {
    width: 100%;
    height: 8px;
    background: var(--border);
    border-radius: 4px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(135deg, var(--primary-blue), var(--primary-green));
    transition: width 0.5s ease;
    width: 0%;
}

/* Question Content */
.question-content {
    padding: 3rem 2rem;
}

.question-header {
    text-align: center;
    margin-bottom: 3rem;
}

.question-title {
    font-size: 1.8rem;
    font-weight: 600;
    margin-bottom: 1rem;
    color: var(--text-dark);
    line-height: 1.3;
}

.question-description {
    color: var(--text-light);
    font-size: 1.1rem;
}

/* Multiple Choice Options */
.options-container {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1rem;
    max-width: 600px;
    margin: 0 auto;
}

.option {
    background: white;
    border: 2px solid var(--border);
    border-radius: var(--border-radius);
    padding: 1.5rem;
    cursor: pointer;
    transition: var(--transition);
    position: relative;
}

.option:hover {
    border-color: var(--primary-blue);
    transform: translateY(-2px);
    box-shadow: var(--shadow);
}

.option.selected {
    border-color: var(--primary-blue);
    background: rgba(74, 144, 226, 0.05);
}

.option.selected::after {
    content: "‚úì";
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 24px;
    height: 24px;
    background: var(--primary-blue);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 0.8rem;
}

.option-content {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.option-icon {
    width: 50px;
    height: 50px;
    background: var(--neutral-light);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    color: var(--primary-blue);
    flex-shrink: 0;
}

.option-text h4 {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 0.3rem;
    color: var(--text-dark);
}

.option-text p {
    color: var(--text-light);
    font-size: 0.9rem;
}

/* Code Editor */
.code-question-content {
    max-width: 800px;
    margin: 0 auto;
}

.code-instructions {
    text-align: center;
    margin-bottom: 2rem;
}

.code-instructions h4 {
    font-size: 1.3rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: var(--text-dark);
}

.code-instructions p {
    color: var(--text-light);
}

.code-editor-container {
    background: var(--code-bg);
    border-radius: var(--border-radius);
    overflow: hidden;
    box-shadow: var(--shadow);
}

.editor-header {
    background: #2d2d2d;
    padding: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.editor-tabs {
    display: flex;
    gap: 0.5rem;
}

.tab {
    background: #3c3c3c;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--code-text);
    font-size: 0.9rem;
}

.tab.active {
    background: var(--primary-blue);
    color: white;
}

.code-editor {
    display: flex;
    min-height: 250px;
}

.line-numbers {
    background: #252525;
    padding: 1rem 0.5rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.9rem;
    color: #6a6a6a;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    min-width: 50px;
    user-select: none;
}

.line-numbers span {
    line-height: 1.8;
    padding-right: 0.5rem;
}

.code-input {
    flex: 1;
    background: var(--code-bg);
    border: none;
    padding: 1rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.9rem;
    color: var(--code-text);
    line-height: 1.8;
    resize: none;
    outline: none;
    white-space: pre;
    overflow-wrap: normal;
    overflow-x: auto;
}

.code-input::placeholder {
    color: #6a6a6a;
}

.code-feedback {
    background: #2d2d2d;
    padding: 0.8rem 1rem;
    border-top: 1px solid #3c3c3c;
}

.feedback-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
    font-weight: 500;
}

.feedback-item.success {
    color: var(--success);
}

.feedback-item.error {
    color: var(--error);
}

/* Navigation */
.question-navigation {
    background: var(--neutral-light);
    padding: 1.5rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-top: 1px solid var(--border);
}

/* Buttons */
.btn-primary, .btn-secondary, .btn-large, .btn-small {
    border: none;
    border-radius: var(--border-radius);
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    text-decoration: none;
    font-family: inherit;
}

.btn-primary {
    background: linear-gradient(135deg, var(--primary-blue), var(--primary-green));
    color: white;
    padding: 0.8rem 1.5rem;
}

.btn-primary:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: var(--shadow-hover);
}

.btn-primary:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

.btn-secondary {
    background: transparent;
    color: var(--text-light);
    border: 2px solid var(--border);
    padding: 0.8rem 1.5rem;
}

.btn-secondary:hover {
    border-color: var(--primary-blue);
    color: var(--primary-blue);
}

.btn-large {
    padding: 1.2rem 2.5rem;
    font-size: 1.1rem;
}

.btn-small {
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
}

/* Processing Screen */
.processing-content {
    text-align: center;
    max-width: 600px;
    margin: 0 auto;
}

.processing-animation {
    margin-bottom: 2rem;
    position: relative;
}

.brain-icon {
    width: 120px;
    height: 120px;
    background: linear-gradient(135deg, var(--primary-blue), var(--primary-green));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 2rem;
    font-size: 4rem;
    color: white;
    animation: processingPulse 2s infinite;
}

@keyframes processingPulse {
    0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(74, 144, 226, 0.7); }
    50% { transform: scale(1.05); box-shadow: 0 0 0 20px rgba(74, 144, 226, 0); }
}

.processing-dots {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin-bottom: 2rem;
}

.processing-dots span {
    width: 12px;
    height: 12px;
    background: var(--primary-blue);
    border-radius: 50%;
    animation: processingDots 1.5s infinite;
}

.processing-dots span:nth-child(2) {
    animation-delay: 0.3s;
}

.processing-dots span:nth-child(3) {
    animation-delay: 0.6s;
}

@keyframes processingDots {
    0%, 60%, 100% { transform: scale(1); opacity: 0.7; }
    30% { transform: scale(1.3); opacity: 1; }
}

.processing-content h2 {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: var(--text-dark);
}

.processing-text {
    font-size: 1.1rem;
    color: var(--text-light);
    margin-bottom: 3rem;
}

.processing-steps {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    max-width: 400px;
    margin: 0 auto;
}

.step {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: white;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    opacity: 0.5;
    transition: var(--transition);
}

.step.completed {
    opacity: 1;
    background: rgba(39, 174, 96, 0.05);
    border-left: 4px solid var(--success);
}

.step.processing {
    opacity: 1;
    background: rgba(74, 144, 226, 0.05);
    border-left: 4px solid var(--primary-blue);
}

.step i {
    width: 24px;
    font-size: 1.2rem;
}

.step.completed i {
    color: var(--success);
}

.step.processing i {
    color: var(--primary-blue);
}

.step span {
    font-weight: 500;
    color: var(--text-dark);
}

/* Results Screen */
.results-content {
    max-width: 1000px;
    margin: 0 auto;
}

.results-header {
    text-align: center;
    margin-bottom: 3rem;
}

.results-celebration {
    background: white;
    padding: 3rem 2rem;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    position: relative;
    overflow: hidden;
}

.results-celebration::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(135deg, var(--primary-blue), var(--primary-green));
}

.celebration-icon {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, var(--accent-yellow), var(--warning));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1.5rem;
    font-size: 2.5rem;
    color: white;
    animation: celebrate 2s infinite;
}

@keyframes celebrate {
    0%, 100% { transform: scale(1) rotate(0deg); }
    25% { transform: scale(1.1) rotate(-5deg); }
    75% { transform: scale(1.1) rotate(5deg); }
}

.results-celebration h1 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: var(--text-dark);
}

.celebration-text {
    font-size: 1.2rem;
    color: var(--text-light);
}

/* Level Card */
.level-card {
    margin-bottom: 3rem;
}

.level-badge {
    background: white;
    padding: 2rem;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    display: flex;
    align-items: center;
    gap: 2rem;
    max-width: 600px;
    margin: 0 auto;
}

.badge-icon {
    width: 100px;
    height: 100px;
    background: linear-gradient(135deg, var(--primary-blue), var(--primary-green));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3rem;
    color: white;
    flex-shrink: 0;
}

.badge-text h3 {
    font-size: 1rem;
    font-weight: 500;
    color: var(--text-light);
    margin-bottom: 0.5rem;
}

.badge-text h2 {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--text-dark);
    margin-bottom: 0.5rem;
}

.badge-text p {
    color: var(--text-light);
    font-size: 1rem;
}

/* Results Grid */
.results-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem;
    margin-bottom: 3rem;
}

.result-card {
    background: white;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    overflow: hidden;
    transition: var(--transition);
}

.result-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-hover);
}

.card-header {
    background: var(--neutral-light);
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.8rem;
    border-bottom: 1px solid var(--border);
}

.card-header i {
    color: var(--primary-blue);
    font-size: 1.3rem;
}

.card-header h4 {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--text-dark);
}

.card-content {
    padding: 1.5rem;
}

.card-content ul {
    list-style: none;
}

.card-content li {
    padding: 0.5rem 0;
    color: var(--text-dark);
    position: relative;
    padding-left: 1.5rem;
}

.card-content li::before {
    content: "‚Ä¢";
    position: absolute;
    left: 0;
    color: var(--primary-blue);
    font-weight: bold;
}

/* Learning Path */
.learning-path {
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
}

.path-step {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.8rem;
    background: var(--neutral-light);
    border-radius: 8px;
    transition: var(--transition);
}

.path-step.active {
    background: rgba(74, 144, 226, 0.1);
    border-left: 4px solid var(--primary-blue);
}

.step-number {
    width: 30px;
    height: 30px;
    background: var(--border);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.9rem;
    color: var(--text-light);
}

.path-step.active .step-number {
    background: var(--primary-blue);
    color: white;
}

.step-text {
    font-weight: 500;
    color: var(--text-dark);
}

/* Stats Card */
.stats-card .card-content {
    padding: 1rem 1.5rem;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
}

.stat-item {
    text-align: center;
    padding: 1rem;
    background: var(--neutral-light);
    border-radius: 8px;
}

.stat-number {
    display: block;
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--primary-blue);
    margin-bottom: 0.3rem;
}

.stat-label {
    font-size: 0.9rem;
    color: var(--text-light);
    font-weight: 500;
}

/* Results Actions */
.results-actions {
    text-align: center;
    display: flex;
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
}

/* Loading Overlay */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: var(--transition);
}

.loading-overlay.active {
    opacity: 1;
    pointer-events: all;
}

.loading-spinner {
    text-align: center;
    color: white;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid rgba(255, 255, 255, 0.3);
    border-top: 4px solid white;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto 1rem;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Responsive Design */
@media (max-width: 768px) {
    .diagnostic-container {
        padding: 80px 1rem 2rem;
    }
    
    .screen {
        padding: 1rem;
    }
    
    .welcome-features {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    .feature-item {
        padding: 1.5rem;
    }
    
    .question-content {
        padding: 2rem 1rem;
    }
    
    .question-title {
        font-size: 1.5rem;
    }
    
    .question-navigation {
        padding: 1rem;
        flex-direction: column;
        gap: 1rem;
    }
    
    .question-navigation .btn-secondary {
        order: 2;
    }
    
    .results-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    .level-badge {
        flex-direction: column;
        text-align: center;
        gap: 1rem;
    }
    
    .badge-icon {
        width: 80px;
        height: 80px;
        font-size: 2.5rem;
    }
    
    .results-actions {
        flex-direction: column;
        align-items: center;
    }
    
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .code-editor {
        flex-direction: column;
    }
    
    .line-numbers {
        flex-direction: row;
        padding: 0.5rem 1rem;
        min-width: auto;
        min-height: auto;
    }
    
    .code-input {
        min-height: 200px;
    }
}

@media (max-width: 480px) {
    .welcome-content h1 {
        font-size: 2rem;
    }
    
    .question-title {
        font-size: 1.3rem;
    }
    
    .processing-content h2 {
        font-size: 1.5rem;
    }
    
    .results-celebration h1 {
        font-size: 2rem;
    }
    
    .badge-text h2 {
        font-size: 2rem;
    }
    
    .nav-container {
        padding: 1rem;
    }
    
    .user-name {
        display: none;
    }
}

/* Accessibility */
.option:focus,
.btn-primary:focus,
.btn-secondary:focus,
.code-input:focus {
    outline: 2px solid var(--primary-blue);
    outline-offset: 2px;
}

/* Print styles */
@media print {
    .navbar,
    .question-navigation,
    .results-actions {
        display: none;
    }
    
    .screen {
        padding: 0;
    }
    
    body {
        background: white;
    }
}
    </style>

    <script>
        /* JavaScript se copiar√° aqu√≠ */
        // Variables globales
let currentQuestionIndex = 0;
let answers = [];
let examStartTime = Date.now();
let totalQuestions = 12; // N√∫mero fijo para el prototipo
let userLevel = 'beginner';

// Base de datos de preguntas simplificada para prototipo
const questions = [
    // Preguntas contextuales (3)
    {
        id: 1,
        type: 'context',
        question: '¬øCu√°l es tu experiencia previa en programaci√≥n?',
        description: 'Esta informaci√≥n nos ayuda a personalizar tu experiencia',
        options: [
            { value: 'none', text: 'Nunca he programado', subtext: 'Soy completamente nuevo en programaci√≥n', icon: 'fa-seedling' },
            { value: 'little', text: 'Muy poco', subtext: 'He visto algunos videos o tutoriales', icon: 'fa-leaf' },
            { value: 'some', text: 'Algo de experiencia', subtext: 'He escrito algunos programas b√°sicos', icon: 'fa-tree' },
            { value: 'moderate', text: 'Experiencia moderada', subtext: 'Conozco varios lenguajes y conceptos', icon: 'fa-forest' }
        ]
    },
    {
        id: 2,
        type: 'context',
        question: '¬øPor qu√© quieres aprender Java?',
        description: 'Conocer tu motivaci√≥n nos ayuda a enfocar mejor el contenido',
        options: [
            { value: 'career', text: 'Por mi carrera', subtext: 'Es parte de mis estudios universitarios', icon: 'fa-graduation-cap' },
            { value: 'work', text: 'Para el trabajo', subtext: 'Necesito Java para proyectos laborales', icon: 'fa-briefcase' },
            { value: 'hobby', text: 'Como hobby', subtext: 'Me gusta programar en mi tiempo libre', icon: 'fa-heart' },
            { value: 'curiosity', text: 'Por curiosidad', subtext: 'Quiero saber c√≥mo funciona la programaci√≥n', icon: 'fa-lightbulb' }
        ]
    },
    {
        id: 3,
        type: 'context',
        question: '¬øQu√© esperas lograr con este curso?',
        description: 'Esto nos ayuda a definir tu ruta de aprendizaje ideal',
        options: [
            { value: 'basics', text: 'Conceptos b√°sicos', subtext: 'Entender los fundamentos de Java', icon: 'fa-building' },
            { value: 'projects', text: 'Crear proyectos', subtext: 'Desarrollar aplicaciones reales', icon: 'fa-rocket' },
            { value: 'certification', text: 'Certificaci√≥n', subtext: 'Prepararme para ex√°menes oficiales', icon: 'fa-certificate' },
            { value: 'mastery', text: 'Dominio completo', subtext: 'Convertirme en experto en Java', icon: 'fa-crown' }
        ]
    },
    // Preguntas t√©cnicas f√°ciles (3)
    {
        id: 4,
        type: 'multiple',
        difficulty: 'easy',
        question: '¬øCu√°l es la extensi√≥n correcta de un archivo Java?',
        options: [
            { value: 'a', text: '.java', correct: true },
            { value: 'b', text: '.jv' },
            { value: 'c', text: '.class' },
            { value: 'd', text: '.js' }
        ]
    },
    {
        id: 5,
        type: 'multiple',
        difficulty: 'easy',
        question: '¬øQu√© palabra clave se usa para definir una clase en Java?',
        options: [
            { value: 'a', text: 'class', correct: true },
            { value: 'b', text: 'Class' },
            { value: 'c', text: 'define' },
            { value: 'd', text: 'create' }
        ]
    },
    {
        id: 6,
        type: 'multiple',
        difficulty: 'easy',
        question: '¬øCu√°l es el m√©todo principal de una aplicaci√≥n Java?',
        options: [
            { value: 'a', text: 'public static void main(String[] args)', correct: true },
            { value: 'b', text: 'public void main()' },
            { value: 'c', text: 'static main()' },
            { value: 'd', text: 'void main(String args)' }
        ]
    },
    // Preguntas intermedias (3)
    {
        id: 7,
        type: 'multiple',
        difficulty: 'medium',
        question: '¬øCu√°l es la diferencia principal entre int y String en Java?',
        options: [
            { value: 'a', text: 'int almacena n√∫meros, String almacena texto', correct: true },
            { value: 'b', text: 'No hay diferencia' },
            { value: 'c', text: 'int es m√°s r√°pido que String' },
            { value: 'd', text: 'String solo puede tener n√∫meros' }
        ]
    },
    {
        id: 8,
        type: 'multiple',
        difficulty: 'medium',
        question: '¬øPara qu√© sirve un ciclo "for" en programaci√≥n?',
        options: [
            { value: 'a', text: 'Para repetir c√≥digo un n√∫mero espec√≠fico de veces', correct: true },
            { value: 'b', text: 'Para crear variables' },
            { value: 'c', text: 'Para definir m√©todos' },
            { value: 'd', text: 'Para importar librer√≠as' }
        ]
    },
    {
        id: 9,
        type: 'code',
        difficulty: 'medium',
        question: 'Completa el c√≥digo para imprimir "¬°Hola Java!" en la consola',
        instruction: 'Completa la l√≠nea que falta para que el programa imprima el mensaje',
        initialCode: `public class MiPrograma {
    public static void main(String[] args) {
        System.out.______("¬°Hola Java!");
    }
}`,
        correctAnswer: 'println'
    },
    // Preguntas dif√≠ciles (3)
    {
        id: 10,
        type: 'multiple',
        difficulty: 'hard',
        question: '¬øQu√© imprimir√° este c√≥digo?\n\nint x = 5;\nint y = 3;\nSystem.out.println(x + y * 2);',
        options: [
            { value: 'a', text: '11', correct: true },
            { value: 'b', text: '16' },
            { value: 'c', text: '13' },
            { value: 'd', text: 'Error' }
        ]
    },
    {
        id: 11,
        type: 'multiple',
        difficulty: 'hard',
        question: '¬øCu√°l es el error en este c√≥digo?\n\npublic class Test {\n    public void main() {\n        System.out.println("Hola");\n    }\n}',
        options: [
            { value: 'a', text: 'Falta "static" en el m√©todo main', correct: true },
            { value: 'b', text: 'Falta punto y coma' },
            { value: 'c', text: 'El nombre de la clase est√° mal' },
            { value: 'd', text: 'No hay error' }
        ]
    },
    {
        id: 12,
        type: 'code',
        difficulty: 'hard',
        question: 'Crea una variable edad con valor 20 y muestra si es mayor de edad',
        instruction: 'Declara la variable y usa una estructura if para verificar si es mayor de edad (>= 18)',
        initialCode: `public class VerificarEdad {
    public static void main(String[] args) {
        // Tu c√≥digo aqu√≠
        
        
        
    }
}`,
        keywords: ['int', 'edad', '20', 'if', '>=', '18']
    }
];

// DOM Elements
const screens = {
    welcome: document.getElementById('welcomeScreen'),
    question: document.getElementById('questionScreen'),
    processing: document.getElementById('processingScreen'),
    results: document.getElementById('resultsScreen')
};

// Inicializaci√≥n cuando se carga la p√°gina
document.addEventListener('DOMContentLoaded', function() {
    initializeDiagnostic();
    setupEventListeners();
});

function initializeDiagnostic() {
    // Mostrar pantalla de bienvenida
    showScreen('welcome');
    
    // Resetear variables
    currentQuestionIndex = 0;
    answers = [];
    examStartTime = Date.now();
    
    console.log('üß† Examen Diagn√≥stico inicializado');
}

function setupEventListeners() {
    // Bot√≥n de iniciar examen
    const startBtn = document.getElementById('startExam');
    if (startBtn) {
        startBtn.addEventListener('click', startExam);
    }
    
    // Botones de navegaci√≥n
    const nextBtn = document.getElementById('nextBtn');
    const prevBtn = document.getElementById('prevBtn');
    
    if (nextBtn) {
        nextBtn.addEventListener('click', nextQuestion);
    }
    
    if (prevBtn) {
        prevBtn.addEventListener('click', previousQuestion);
    }
    
    // Opciones de m√∫ltiple opci√≥n (delegaci√≥n de eventos)
    const optionsContainer = document.getElementById('optionsContainer');
    if (optionsContainer) {
        optionsContainer.addEventListener('click', selectOption);
    }
    
    // Editor de c√≥digo
    const codeInput = document.getElementById('codeInput');
    if (codeInput) {
        codeInput.addEventListener('input', validateCode);
    }
    
    // Bot√≥n reset c√≥digo
    const resetBtn = document.getElementById('resetCode');
    if (resetBtn) {
        resetBtn.addEventListener('click', resetCode);
    }
    
    // Botones de resultados
    const startLearningBtn = document.getElementById('startLearning');
    const retakeBtn = document.getElementById('retakeExam');
    
    if (startLearningBtn) {
        startLearningBtn.addEventListener('click', goToDashboard);
    }
    
    if (retakeBtn) {
        retakeBtn.addEventListener('click', retakeExam);
    }
}

function showScreen(screenName) {
    // Ocultar todas las pantallas
    Object.values(screens).forEach(screen => {
        if (screen) {
            screen.classList.remove('active');
        }
    });
    
    // Mostrar la pantalla solicitada
    if (screens[screenName]) {
        screens[screenName].classList.add('active');
    }
}

function startExam() {
    showScreen('question');
    loadQuestion(0);
    console.log('üìù Examen iniciado');
}

function loadQuestion(index) {
    const question = questions[index];
    
    if (!question) {
        completeExam();
        return;
    }
    
    // Actualizar contador de preguntas
    const currentQuestionEl = document.getElementById('currentQuestion');
    if (currentQuestionEl) {
        currentQuestionEl.textContent = index + 1;
    }
    
    // Actualizar pregunta
    const questionTitle = document.getElementById('questionTitle');
    const questionDescription = document.getElementById('questionDescription');
    
    if (questionTitle) {
        questionTitle.textContent = question.question;
    }
    
    if (questionDescription) {
        questionDescription.textContent = question.description || '';
    }
    
    // Mostrar tipo de pregunta apropiado
    if (question.type === 'multiple' || question.type === 'context') {
        showMultipleChoice(question);
    } else if (question.type === 'code') {
        showCodeEditor(question);
    }
    
    // Actualizar progreso
    updateProgress();
    
    // Actualizar estado de IA
    updateAIStatus(index);
    
    // Actualizar navegaci√≥n
    updateNavigation(index);
}

function showMultipleChoice(question) {
    const multipleChoice = document.getElementById('multipleChoice');
    const codeEditor = document.getElementById('codeEditor');
    const optionsContainer = document.getElementById('optionsContainer');
    
    if (multipleChoice) multipleChoice.style.display = 'block';
    if (codeEditor) codeEditor.style.display = 'none';
    
    // Limpiar opciones anteriores
    if (optionsContainer) {
        optionsContainer.innerHTML = '';
        
        // Crear opciones
        question.options.forEach(option => {
            const optionElement = document.createElement('div');
            optionElement.className = 'option';
            optionElement.setAttribute('data-value', option.value);
            
            optionElement.innerHTML = `
                <div class="option-content">
                    <div class="option-icon">
                        <i class="fas ${option.icon || 'fa-circle'}"></i>
                    </div>
                    <div class="option-text">
                        <h4>${option.text}</h4>
                        <p>${option.subtext || ''}</p>
                    </div>
                </div>
            `;
            
            optionsContainer.appendChild(optionElement);
        });
    }
    
    // Deshabilitar bot√≥n siguiente inicialmente
    const nextBtn = document.getElementById('nextBtn');
    if (nextBtn) {
        nextBtn.disabled = true;
    }
}

function showCodeEditor(question) {
    const multipleChoice = document.getElementById('multipleChoice');
    const codeEditor = document.getElementById('codeEditor');
    const codeInput = document.getElementById('codeInput');
    
    if (multipleChoice) multipleChoice.style.display = 'none';
    if (codeEditor) codeEditor.style.display = 'block';
    
    // Actualizar instrucciones
    const instructionTitle = document.querySelector('#codeInstructions h4');
    const instructionText = document.querySelector('#codeInstructions p');
    
    if (instructionTitle) {
        instructionTitle.textContent = question.question;
    }
    
    if (instructionText) {
        instructionText.textContent = question.instruction;
    }
    
    // Establecer c√≥digo inicial
    if (codeInput) {
        codeInput.value = question.initialCode || '';
    }
    
    // Actualizar n√∫meros de l√≠nea
    updateLineNumbers();
    
    // Habilitar bot√≥n siguiente para preguntas de c√≥digo
    const nextBtn = document.getElementById('nextBtn');
    if (nextBtn) {
        nextBtn.disabled = false;
    }
    
    // Limpiar feedback
    hideCodeFeedback();
}

function selectOption(event) {
    const option = event.target.closest('.option');
    if (!option) return;
    
    // Remover selecci√≥n anterior
    document.querySelectorAll('.option').forEach(opt => {
        opt.classList.remove('selected');
    });
    
    // Seleccionar opci√≥n actual
    option.classList.add('selected');
    
    // Guardar respuesta
    const value = option.getAttribute('data-value');
    storeAnswer(value);
    
    // Habilitar bot√≥n siguiente
    const nextBtn = document.getElementById('nextBtn');
    if (nextBtn) {
        nextBtn.disabled = false;
    }
    
    // Animaci√≥n de selecci√≥n
    option.style.transform = 'scale(0.98)';
    setTimeout(() => {
        option.style.transform = 'scale(1)';
    }, 150);
}

function storeAnswer(value) {
    const currentQuestion = questions[currentQuestionIndex];
    
    answers[currentQuestionIndex] = {
        questionId: currentQuestion.id,
        answer: value,
        timestamp: Date.now(),
        timeSpent: Date.now() - examStartTime
    };
}

function validateCode() {
    const codeInput = document.getElementById('codeInput');
    if (!codeInput) return;
    
    const code = codeInput.value;
    const currentQuestion = questions[currentQuestionIndex];
    
    if (!currentQuestion || currentQuestion.type !== 'code') return;
    
    // Guardar respuesta
    storeAnswer(code);
    
    // Actualizar n√∫meros de l√≠nea
    updateLineNumbers();
    
    // Validaci√≥n simple
    if (code.trim().length > 10) {
        showCodeFeedback(true, 'C√≥digo v√°lido');
    } else {
        hideCodeFeedback();
    }
}

function updateLineNumbers() {
    const codeInput = document.getElementById('codeInput');
    const lineNumbers = document.getElementById('lineNumbers');
    
    if (!codeInput || !lineNumbers) return;
    
    const code = codeInput.value;
    const lines = code.split('\n').length;
    
    lineNumbers.innerHTML = '';
    for (let i = 1; i <= Math.max(lines, 5); i++) {
        const span = document.createElement('span');
        span.textContent = i;
        lineNumbers.appendChild(span);
    }
}

function showCodeFeedback(isSuccess, message) {
    const feedbackContainer = document.getElementById('codeFeedback');
    if (!feedbackContainer) return;
    
    const successEl = feedbackContainer.querySelector('.feedback-item.success');
    const errorEl = feedbackContainer.querySelector('.feedback-item.error');
    
    if (isSuccess && successEl) {
        successEl.style.display = 'flex';
        if (errorEl) errorEl.style.display = 'none';
        const messageEl = successEl.querySelector('span');
        if (messageEl) messageEl.textContent = message;
    } else if (!isSuccess && errorEl) {
        errorEl.style.display = 'flex';
        if (successEl) successEl.style.display = 'none';
        const messageEl = errorEl.querySelector('#errorMessage');
        if (messageEl) messageEl.textContent = message;
    }
}

function hideCodeFeedback() {
    const feedbackContainer = document.getElementById('codeFeedback');
    if (!feedbackContainer) return;
    
    feedbackContainer.querySelectorAll('.feedback-item').forEach(item => {
        item.style.display = 'none';
    });
}

function resetCode() {
    const currentQuestion = questions[currentQuestionIndex];
    const codeInput = document.getElementById('codeInput');
    
    if (currentQuestion && currentQuestion.initialCode && codeInput) {
        codeInput.value = currentQuestion.initialCode;
        updateLineNumbers();
        hideCodeFeedback();
    }
}

function nextQuestion() {
    showLoadingOverlay();
    
    setTimeout(() => {
        hideLoadingOverlay();
        
        currentQuestionIndex++;
        
        if (currentQuestionIndex >= questions.length) {
            completeExam();
        } else {
            loadQuestion(currentQuestionIndex);
        }
    }, 1000);
}

function previousQuestion() {
    if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        loadQuestion(currentQuestionIndex);
    }
}

function updateProgress() {
    const progressFill = document.getElementById('progressFill');
    if (progressFill) {
        const progress = Math.min((currentQuestionIndex / totalQuestions) * 100, 95);
        progressFill.style.width = progress + '%';
    }
}

function updateAIStatus(questionIndex) {
    const aiStatus = document.getElementById('aiStatus');
    if (!aiStatus) return;
    
    const statusMessages = [
        'Analizando tu perfil...',
        'Evaluando respuestas...',
        'Ajustando dificultad...',
        'Identificando fortalezas...',
        'Determinando nivel √≥ptimo...',
        'Finalizando diagn√≥stico...'
    ];
    
    if (questionIndex < 3) {
        aiStatus.innerHTML = '<i class="fas fa-user-cog pulse"></i> Recopilando informaci√≥n...';
    } else {
        const messageIndex = Math.min(questionIndex - 3, statusMessages.length - 1);
        aiStatus.innerHTML = `<i class="fas fa-brain pulse"></i> ${statusMessages[messageIndex]}`;
    }
}

function updateNavigation(index) {
    const nextBtn = document.getElementById('nextBtn');
    const prevBtn = document.getElementById('prevBtn');
    
    // Bot√≥n anterior (deshabilitado en examen adaptativo)
    if (prevBtn) {
        prevBtn.style.opacity = '0.5';
        prevBtn.style.pointerEvents = 'none';
    }
    
    // Texto del bot√≥n siguiente
    if (nextBtn) {
        if (index >= questions.length - 1) {
            nextBtn.innerHTML = '<i class="fas fa-check"></i> Finalizar';
        } else {
            nextBtn.innerHTML = 'Siguiente <i class="fas fa-arrow-right"></i>';
        }
    }
}

function showLoadingOverlay() {
    const loadingOverlay = document.getElementById('loadingOverlay');
    if (loadingOverlay) {
        loadingOverlay.style.display = 'flex';
    }
}

function hideLoadingOverlay() {
    const loadingOverlay = document.getElementById('loadingOverlay');
    if (loadingOverlay) {
        loadingOverlay.style.display = 'none';
    }
}

function completeExam() {
    showProcessingScreen();
}

function showProcessingScreen() {
    showScreen('processing');
    
    const steps = document.querySelectorAll('.step');
    const processingText = document.getElementById('processingText');
    
    const processingTexts = [
        'Analizando patrones de respuesta...',
        'Identificando √°reas de fortaleza...',
        'Determinando nivel de conocimiento...',
        'Generando recomendaciones personalizadas...',
        'Preparando tu ruta de aprendizaje...'
    ];
    
    let currentStep = 0;
    
    const processSteps = () => {
        if (currentStep < steps.length) {
            // Actualizar texto de procesamiento
            if (currentStep < processingTexts.length && processingText) {
                processingText.textContent = processingTexts[currentStep];
            }
            
            // Marcar paso anterior como completado
            if (currentStep > 0 && steps[currentStep - 1]) {
                steps[currentStep - 1].classList.remove('processing');
                steps[currentStep - 1].classList.add('completed');
            }
            
            // Marcar paso actual como procesando
            if (steps[currentStep]) {
                steps[currentStep].classList.add('processing');
            }
            
            currentStep++;
            setTimeout(processSteps, 2000);
        } else {
            // Todos los pasos completados
            if (steps[steps.length - 1]) {
                steps[steps.length - 1].classList.remove('processing');
                steps[steps.length - 1].classList.add('completed');
            }
            
            setTimeout(() => {
                generateResults();
                showResults();
            }, 1000);
        }
    };
    
    setTimeout(processSteps, 1000);
}

function generateResults() {
    // Calcular nivel basado en respuestas
    let correctAnswers = 0;
    let totalTechnicalQuestions = 0;
    
    answers.forEach((answer, index) => {
        const question = questions[index];
        if (question && (question.type === 'multiple' || question.type === 'code')) {
            totalTechnicalQuestions++;
            
            if (question.type === 'multiple') {
                const correctOption = question.options.find(opt => opt.correct);
                if (correctOption && answer.answer === correctOption.value) {
                    correctAnswers++;
                }
            } else if (question.type === 'code') {
                // Validaci√≥n simple para c√≥digo
                if (question.correctAnswer && answer.answer.includes(question.correctAnswer)) {
                    correctAnswers++;
                } else if (question.keywords) {
                    const hasKeywords = question.keywords.some(keyword => 
                        answer.answer.toLowerCase().includes(keyword.toLowerCase())
                    );
                    if (hasKeywords) correctAnswers++;
                }
            }
        }
    });
    
    // Determinar nivel
    const accuracy = totalTechnicalQuestions > 0 ? correctAnswers / totalTechnicalQuestions : 0;
    
    if (accuracy >= 0.8) {
        userLevel = 'advanced';
    } else if (accuracy >= 0.5) {
        userLevel = 'intermediate';
    } else {
        userLevel = 'beginner';
    }
    
    console.log('üìä Resultados generados:', {
        accuracy,
        correctAnswers,
        totalTechnicalQuestions,
        userLevel
    });
}

function showResults() {
    showScreen('results');
    
    // Animaci√≥n de celebraci√≥n
    setTimeout(() => {
        const celebrationIcon = document.querySelector('.celebration-icon');
        if (celebrationIcon) {
            celebrationIcon.style.animation = 'celebrate 2s infinite';
        }
    }, 500);
    
    // Configuraci√≥n de niveles
    const levelConfig = {
        beginner: {
            icon: 'fa-seedling',
            title: 'Principiante',
            description: 'Perfecto para comenzar desde los fundamentos',
            color: 'var(--success)',
            strengths: ['Motivaci√≥n para aprender', 'Actitud positiva', 'Disposici√≥n para practicar'],
            focusAreas: ['Sintaxis b√°sica de Java', 'Conceptos fundamentales', 'Pr√°ctica con ejercicios simples', 'Entorno de desarrollo']
        },
        intermediate: {
            icon: 'fa-tree',
            title: 'Intermedio',
            description: 'Tienes bases s√≥lidas, continuemos construyendo',
            color: 'var(--primary-blue)',
            strengths: ['Comprensi√≥n de conceptos b√°sicos', 'Experiencia previa', 'Pensamiento l√≥gico'],
            focusAreas: ['Estructuras de control avanzadas', 'Programaci√≥n orientada a objetos', 'Manejo de errores', 'Proyectos pr√°cticos']
        },
        advanced: {
            icon: 'fa-crown',
            title: 'Avanzado',
            description: 'Excelente nivel, enfoqu√©monos en temas especializados',
            color: 'var(--accent-yellow)',
            strengths: ['Dominio de sintaxis', 'Experiencia en programaci√≥n', 'Resoluci√≥n de problemas', 'Pensamiento algor√≠tmico'],
            focusAreas: ['Patrones de dise√±o', 'Optimizaci√≥n de c√≥digo', 'Frameworks avanzados', 'Proyectos complejos']
        }
    };
    
    const config = levelConfig[userLevel];
    
    // Actualizar badge de nivel
    const levelIcon = document.getElementById('levelIcon');
    const userLevelEl = document.getElementById('userLevel');
    const levelDescription = document.getElementById('levelDescription');
    
    if (levelIcon) {
        levelIcon.innerHTML = `<i class="fas ${config.icon}"></i>`;
        levelIcon.style.background = `linear-gradient(135deg, ${config.color}, var(--primary-green))`;
    }
    
    if (userLevelEl) {
        userLevelEl.textContent = config.title;
    }
    
    if (levelDescription) {
        levelDescription.textContent = config.description;
    }
    
    // Actualizar fortalezas
    const strengthsList = document.getElementById('strengthsList');
    if (strengthsList) {
        strengthsList.innerHTML = config.strengths.map(strength => 
            `<li>${strength}</li>`
        ).join('');
    }
    
    // Actualizar √°reas de enfoque
    const focusAreasList = document.getElementById('focusAreasList');
    if (focusAreasList) {
        focusAreasList.innerHTML = config.focusAreas.map(area => 
            `<li>${area}</li>`
        ).join('');
    }
    
    // Actualizar estad√≠sticas
    const totalTime = Math.round((Date.now() - examStartTime) / 1000 / 60);
    const questionsAnswered = answers.length;
    const accuracyRate = Math.round((answers.filter(a => a.answer).length / questionsAnswered) * 100);
    
    const questionsAnsweredEl = document.getElementById('questionsAnswered');
    const timeSpentEl = document.getElementById('timeSpent');
    const accuracyRateEl = document.getElementById('accuracyRate');
    
    if (questionsAnsweredEl) {
        questionsAnsweredEl.textContent = questionsAnswered;
    }
    
    if (timeSpentEl) {
        timeSpentEl.textContent = `${totalTime} min`;
    }
    
    if (accuracyRateEl) {
        accuracyRateEl.textContent = `${accuracyRate}%`;
    }
}

function goToDashboard() {
    alert('¬°Excelente! Te llevaremos a tu dashboard personalizado üéØ');
    // window.location.href = 'student-dashboard.html';
}

function retakeExam() {
    if (confirm('¬øEst√°s seguro de que quieres volver a tomar el examen?')) {
        // Resetear variables
        currentQuestionIndex = 0;
        answers = [];
        examStartTime = Date.now();
        userLevel = 'beginner';
        
        // Volver a la pantalla de bienvenida
        showScreen('welcome');
        
        console.log('üîÑ Examen reiniciado');
    }
}
    </script>
</body>
</html>