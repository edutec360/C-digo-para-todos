<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Actividad - Código para Todos</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    </head>
  <body>
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-logo">
          <div class="logo-icon">
            <i class="fas fa-code"></i>
          </div>
          <span class="logo-text">Código para Todos</span>
        </div>

        <div class="nav-menu">
          <a href="2_dashboardEstudiante2.html" class="nav-link" data-page="dashboard">
            <i class="fas fa-home"></i>
            Dashboard
          </a>
          <a href="2_dashboardEstudiante2.html#courses" class="nav-link" data-page="courses">
            <i class="fas fa-book"></i>
            Mis Cursos
          </a>
          <a href="activities_general.html" class="nav-link active" data-page="activities">
            <i class="fas fa-pencil-alt"></i>
            Actividades
          </a>
          <a href="#" class="nav-link" data-page="competitions">
            <i class="fas fa-trophy"></i>
            Competencias
          </a>
        </div>

        <a href="11_profile.html" class="nav-profile-link">
          <div class="nav-profile">
            <div class="profile-info">
              <span class="user-name">Ana García</span>
              <span class="user-level">Mi Perfil</span>
            </div>
            <div class="profile-avatar" id="userAvatar">
              <img
                src="https://ui-avatars.com/api/?name=Ana+Garcia&background=4A90E2&color=fff&size=40"
                alt="Ana García"
              />
            </div>
          </div>
        </a>
      </div>
    </nav>

    <main class="activity-main">
      <div class="activity-container">
        <header class="activity-header">
          <div class="header-left">
            <a href="5_activities.html" class="back-button-link">
              <button class="back-button" id="backToActivities">
                <i class="fas fa-arrow-left"></i>
                Volver a Actividades
              </button>
            </a>

            <div class="activity-title-section">
              <h1 id="activityTitle">Números Primos</h1>
              <p id="activityTopic">Ciclos For • Java Fundamentos</p>
            </div>
          </div>

          <div class="header-right">
            <div class="activity-meta">
              <div class="meta-item">
                <div class="difficulty-badge hard" id="difficultyBadge">
                  <i class="fas fa-circle"></i>
                  <span>Difícil</span>
                </div>
              </div>

              <div class="meta-item">
                <div class="type-badge upload" id="typeBadge">
                  <i class="fas fa-upload"></i>
                  <span>Subir Archivo</span>
                </div>
              </div>

              <div class="meta-item">
                <div class="due-badge urgent" id="dueBadge">
                  <i class="fas fa-exclamation-circle"></i>
                  <span>Vence mañana</span>
                </div>
              </div>

              <div class="meta-item">
                <div class="status-badge pending" id="statusBadge">
                  <i class="fas fa-clock"></i>
                  <span>Pendiente</span>
                </div>
              </div>
            </div>
          </div>
        </header>

        <div class="activity-type-selector">
          <button class="type-selector-btn active" data-type="upload">
            <i class="fas fa-upload"></i>
            Números Primos (Subida)
          </button>
          <button class="type-selector-btn" data-type="ide">
            <i class="fas fa-code"></i>
            Tabla de Multiplicar (IDE)
          </button>
        </div>

        <div
          class="activity-content upload-activity active"
          id="uploadActivity"
        >
          <div class="activity-tabs">
            <div class="tab-nav">
              <button class="tab-btn active" data-tab="description">
                <i class="fas fa-file-alt"></i> 
                Descripción
              </button>
              <button class="tab-btn" data-tab="submission">
                <i class="fas fa-upload"></i>
                Entrega
              </button>
            </div>

            <div class="tab-content active" id="descriptionTab">
              <div class="description-container">
                <div class="problem-statement">
                  <h2>Problema: Números Primos</h2>
                  <div class="problem-content">
                    <h3>Descripción</h3>
                    <p>
                      Crea un programa en Java que determine si un número dado
                      es primo o no. Un número primo es aquel que solo es
                      divisible por 1 y por sí mismo.
                    </p>

                    <h3>Objetivos de Aprendizaje</h3>
                    <ul>
                      <li>Implementar ciclos for para iteración controlada</li>
                      <li>Usar condicionales para validar condiciones</li>
                      <li>Aplicar lógica matemática en programación</li>
                      <li>Optimizar algoritmos básicos</li>
                    </ul>

                    <h3>Especificaciones</h3>
                    <div class="specifications">
                      <div class="spec-item">
                        <strong>Entrada:</strong> Un número entero positivo
                        mayor que 1
                      </div>
                      <div class="spec-item">
                        <strong>Salida:</strong> Mensaje indicando si el número
                        es primo o no
                      </div>
                      <div class="spec-item">
                        <strong>Restricciones:</strong> El número debe estar
                        entre 2 y 1000
                      </div>
                    </div>

                    <h3>Ejemplos</h3>
                    <div class="examples">
                      <div class="example">
                        <h4>Ejemplo 1:</h4>
                        <div class="example-content">
                          <div class="input-output">
                            <div class="input"><strong>Entrada:</strong> 7</div>
                            <div class="output">
                              <strong>Salida:</strong> "7 es un número primo"
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="example">
                        <h4>Ejemplo 2:</h4>
                        <div class="example-content">
                          <div class="input-output">
                            <div class="input">
                              <strong>Entrada:</strong> 12
                            </div>
                            <div class="output">
                              <strong>Salida:</strong> "12 no es un número
                              primo"
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="example">
                        <h4>Ejemplo 3:</h4>
                        <div class="example-content">
                          <div class="input-output">
                            <div class="input"><strong>Entrada:</strong> 2</div>
                            <div class="output">
                              <strong>Salida:</strong> "2 es un número primo"
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    </div>
                </div>
              </div>
            </div>

            <div class="tab-content" id="submissionTab">
              <div class="submission-container">
                <div class="submission-area">
                  <h2>Entrega de Archivo</h2>
                  <div class="upload-section">
                    <div class="upload-area" id="uploadArea">
                       
                       <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                       <div class="upload-text"><h3>Arrastra tu archivo .java aquí</h3><p>o <span class="browse-link">busca en tu computadora</span></p></div>
                       <div class="upload-requirements"><small>Formato aceptado: .java • Tamaño máximo: 5MB</small></div>
                       <input type="file" id="fileInput" accept=".java" style="display: none"/>
                    </div>
                    <div class="uploaded-files" id="uploadedFiles"></div>
                  </div>
                  <div class="submission-actions">
                    <button class="btn-secondary" id="saveDraftBtn">
                      <i class="fas fa-save"></i> Guardar Borrador
                    </button>
                    <button class="btn-primary" id="submitBtn" disabled>
                      <i class="fas fa-paper-plane"></i> Entregar Actividad
                    </button>
                  </div>
                  <div class="submission-info">
                     
                     <div class="info-item"><i class="fas fa-clock"></i><span>Tiempo restante: <strong class="urgent">23 horas 45 minutos</strong></span></div>
                     <div class="info-item"><i class="fas fa-redo"></i><span>Intentos disponibles: <strong>3</strong></span></div>
                  </div>
                </div>
                <div class="submission-history">
                   
                   <h3>Historial de Entregas</h3>
                   <div class="history-empty"><i class="fas fa-history"></i><p>No hay entregas anteriores</p></div>
                </div>
              </div>
            </div>
          </div>
        </div>


        <div class="activity-content ide-activity" id="ideActivity">
          

          <!-- Descripción del Problema con formato bonito -->
          <div class="ide-description-section">
            <div class="description-container">
              <div class="problem-statement">
                <h2>Problema: Tabla de Multiplicar</h2>
                <div class="problem-content">
                  <h3>Descripción</h3>
                  <p>
                    Crea un programa en Java que genere y muestre la tabla de multiplicar 
                    de un número dado del 1 al 10. El programa debe solicitar un número al 
                    usuario y mostrar su tabla completa de forma ordenada.
                  </p>

                  <h3>Objetivos de Aprendizaje</h3>
                  <ul>
                    <li>Implementar ciclos for para iteración controlada</li>
                    <li>Manipular entrada y salida de datos con Scanner</li>
                    <li>Formatear salida de texto de manera legible</li>
                    <li>Realizar operaciones aritméticas básicas</li>
                  </ul>

                  <h3>Especificaciones</h3>
                  <div class="specifications">
                    <div class="spec-item">
                      <strong>Entrada:</strong> Un número entero entre 1 y 20
                    </div>
                    <div class="spec-item">
                      <strong>Salida:</strong> La tabla de multiplicar del 1 al 10, cada resultado en una línea
                    </div>
                    <div class="spec-item">
                      <strong>Formato:</strong> número x multiplicador = resultado
                    </div>
                  </div>

                  <h3>Ejemplos</h3>
                  <div class="examples">
                    <div class="example">
                      <h4>Ejemplo 1:</h4>
                      <div class="example-content">
                        <div class="input-output">
                          <div class="input"><strong>Entrada:</strong> 5</div>
                          <div class="output">
                            <strong>Salida:</strong>
                            <pre>5 x 1 = 5
5 x 2 = 10
5 x 3 = 15
5 x 4 = 20
5 x 5 = 25
5 x 6 = 30
5 x 7 = 35
5 x 8 = 40
5 x 9 = 45
5 x 10 = 50</pre>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="example">
                      <h4>Ejemplo 2:</h4>
                      <div class="example-content">
                        <div class="input-output">
                          <div class="input"><strong>Entrada:</strong> 3</div>
                          <div class="output">
                            <strong>Salida:</strong>
                            <pre>3 x 1 = 3
3 x 2 = 6
3 x 3 = 9
3 x 4 = 12
3 x 5 = 15
3 x 6 = 18
3 x 7 = 21
3 x 8 = 24
3 x 9 = 27
3 x 10 = 30</pre>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <h3>Casos de Prueba</h3>
                  <div class="test-cases-info">
                    <p>Tu código será evaluado con los siguientes casos de prueba:</p>
                    <div class="test-case-list">
                      <div class="test-case-item">
                        <span class="test-number">Caso 1:</span>
                        <span class="test-desc">Entrada = 3 (verificar tabla del 3)</span>
                      </div>
                      <div class="test-case-item">
                        <span class="test-number">Caso 2:</span>
                        <span class="test-desc">Entrada = 7 (verificar tabla del 7)</span>
                      </div>
                      <div class="test-case-item">
                        <span class="test-number">Caso 3:</span>
                        <span class="test-desc">Entrada = 12 (verificar tabla del 12)</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- IDE completo abajo -->
          <div class="ide-workspace-full">
            <div class="code-editor-section">
              <div class="editor-header">
                <div class="editor-title">
                  <i class="fab fa-java"></i>
                  <span>TablaMultiplicar.java</span>
                </div>
                <div class="editor-actions">
                  <button class="btn-ide execute" id="runCodeBtn">
                    <i class="fas fa-play"></i> Ejecutar
                  </button>
                  <button class="btn-ide hint" id="aiHintBtn">
                    <i class="fas fa-lightbulb"></i> Pistas IA
                  </button>
                  <button class="btn-ide submit" id="submitIdeBtn">
                    <i class="fas fa-paper-plane"></i> Enviar
                  </button>
                </div>
              </div>

              <div class="code-editor">
                <div class="line-numbers" id="lineNumbers">
                </div>
                <textarea
                  class="code-input"
                  id="codeInput"
                  spellcheck="false"
                ></textarea>
              </div>
            </div>

            <div class="console-section">
              <div class="section-header">
                <h3>Consola de Salida</h3>
                <button class="btn-icon" id="clearConsole" title="Limpiar Consola">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
              <div class="console-output" id="consoleOutput">
                <div class="console-line info"><span class="timestamp">[14:35:20]</span><span class="message">Listo para ejecutar.</span></div>
              </div>
            </div>
          </div>
        </div>

</textarea >
                </div>
              </div>

              

            </div>
          </div>
      </div>
    </main>
    <style>
  /* Variables CSS */
  :root {
    --primary-blue: #4a90e2;
    --primary-green: #7ed321;
    --accent-pink: #ff6b9d;
    --accent-yellow: #f5a623;
    --java-color: #ed8b00;
    --neutral-light: #f8f9fa;
    --neutral-medium: #e9ecef; /* Added */
    --neutral-dark: #2c3e50;
    --success: #27ae60;
    --warning: #f39c12;
    --error: #e74c3c;
    --text-primary: #2c3e50;
    --text-secondary: #7f8c8d;
    --border-light: #e5e5e5;
    --shadow-light: 0 2px 10px rgba(0, 0, 0, 0.08);
    --shadow-medium: 0 4px 15px rgba(0, 0, 0, 0.12);
    --shadow-strong: 0 8px 30px rgba(0, 0, 0, 0.2);
    --border-radius: 12px;
    --transition: all 0.3s ease;
    --nav-height: 70px;

    /* CAMBIO: Colores para IDE Oscuro */
    --ide-bg: #1e1e1e;
    --ide-bg-lighter: #252526;
    --ide-bg-lightest: #2d2d2d;
    --ide-text: #d4d4d4;
    --ide-text-secondary: #858585;
    --ide-border: #333333;
    --ide-accent: var(--primary-blue);
    --ide-success: #4ec9b0;
    --ide-error: #f44747;
    --ide-warning: #ffd700;
  }

  /* Reset y Base */
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: "Inter", sans-serif;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    color: var(--text-primary);
    line-height: 1.6;
    min-height: 100vh;
  }

  /* Navbar Unificada */
  .navbar { background: white; box-shadow: var(--shadow-light); position: sticky; top: 0; z-index: 100; height: var(--nav-height); }
  .nav-container { max-width: 1400px; margin: 0 auto; padding: 0 20px; display: flex; align-items: center; justify-content: space-between; height: 100%; }
  .nav-logo { display: flex; align-items: center; gap: 12px; font-weight: 700; font-size: 1.2rem; color: var(--primary-blue); flex-shrink: 0; }
  .logo-icon { width: 40px; height: 40px; background: linear-gradient(135deg, var(--primary-blue), var(--primary-green)); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem; }
  .nav-menu { display: flex; gap: 30px; flex: 1; justify-content: center; min-width: 0; }
  .nav-link { display: flex; align-items: center; gap: 8px; padding: 8px 16px; text-decoration: none; color: var(--text-secondary); border-radius: 8px; transition: var(--transition); font-weight: 500; white-space: nowrap; }
  .nav-link:hover, .nav-link.active { color: var(--primary-blue); background: rgba(74, 144, 226, 0.1); }
  .nav-profile-link { text-decoration: none; flex-shrink: 0; }
  .nav-profile { display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px; border-radius: 10px; transition: var(--transition); }
  .nav-profile:hover { background: var(--neutral-light); }
  .profile-info { text-align: right; }
  .user-name { display: block; font-weight: 600; color: var(--text-primary); font-size: 0.9rem; }
  .user-level { font-size: 0.85rem; color: var(--text-secondary); }
  .profile-avatar img { width: 40px; height: 40px; border-radius: 50%; border: 2px solid var(--primary-blue); }
  /* Fin Navbar */

  /* Main Content */
  .activity-main { max-width: 1600px; /* Más ancho para IDE */ margin: 0 auto; padding: 30px 20px; }
  .activity-container { display: flex; flex-direction: column; gap: 25px; }

  /* CAMBIO: Breadcrumbs eliminados */

  /* Activity Header */
  .activity-header { background: white; border-radius: var(--border-radius); padding: 25px; box-shadow: var(--shadow-light); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; }
  .header-left { display: flex; align-items: center; gap: 20px; flex-wrap: wrap; } /* Permite wrap */
  .back-button-link { text-decoration: none; } /* Para el botón back */
  .back-button { display: inline-flex; /* Cambiado a inline-flex */ align-items: center; gap: 8px; padding: 10px 16px; background: var(--neutral-light); border: none; border-radius: 8px; color: var(--text-secondary); font-weight: 500; cursor: pointer; transition: var(--transition); }
  .back-button:hover { background: var(--primary-blue); color: white; }
  .activity-title-section h1 { font-size: 1.8rem; font-weight: 700; color: var(--text-primary); margin-bottom: 5px; }
  .activity-title-section p { color: var(--text-secondary); font-size: 1rem; }
  .header-right { display: flex; align-items: center; }
  .activity-meta { display: flex; gap: 15px; flex-wrap: wrap; justify-content: flex-end; /* Alinea a la derecha si envuelve */ }
  .meta-item { display: flex; align-items: center; }

  /* Badges (sin cambios) */
  .difficulty-badge, .type-badge, .due-badge, .status-badge { display: flex; align-items: center; gap: 6px; padding: 8px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: 600; text-transform: uppercase; }
  .difficulty-badge.easy { background: rgba(39, 174, 96, 0.1); color: var(--success); }
  .difficulty-badge.medium { background: rgba(243, 156, 18, 0.1); color: var(--warning); }
  .difficulty-badge.hard { background: rgba(231, 76, 60, 0.1); color: var(--error); }
  .type-badge.upload { background: rgba(74, 144, 226, 0.1); color: var(--primary-blue); }
  .type-badge.ide { background: rgba(126, 211, 33, 0.1); color: var(--primary-green); }
  .due-badge.urgent { background: rgba(231, 76, 60, 0.1); color: var(--error); animation: pulse 2s infinite; }
  .due-badge.normal { background: rgba(243, 156, 18, 0.1); color: var(--warning); }
  .status-badge.pending { background: rgba(243, 156, 18, 0.1); color: var(--warning); }
  .status-badge.progress { background: rgba(74, 144, 226, 0.1); color: var(--primary-blue); }
  .status-badge.completed { background: rgba(39, 174, 96, 0.1); color: var(--success); }

  /* Activity Type Selector (sin cambios) */
  .activity-type-selector { display: flex; gap: 10px; background: white; border-radius: var(--border-radius); padding: 15px; box-shadow: var(--shadow-light); }
  .type-selector-btn { display: flex; align-items: center; gap: 8px; padding: 12px 20px; border: 2px solid var(--border-light); background: white; border-radius: 8px; cursor: pointer; transition: var(--transition); font-weight: 500; color: var(--text-secondary); }
  .type-selector-btn:hover { border-color: var(--primary-blue); color: var(--primary-blue); }
  .type-selector-btn.active { background: var(--primary-blue); color: white; border-color: var(--primary-blue); }

  /* Activity Content General */
  .activity-content { background: white; border-radius: var(--border-radius); box-shadow: var(--shadow-light); overflow: hidden; display: none; }
  .activity-content.active { display: block; }

  /* Upload Activity Styles (Description Tab Content Adjusted) */
  .activity-tabs { display: flex; flex-direction: column; }
  .tab-nav { display: flex; background: var(--neutral-light); border-bottom: 1px solid var(--border-light); }
  .tab-btn { display: flex; align-items: center; gap: 8px; padding: 15px 25px; border: none; background: none; cursor: pointer; transition: var(--transition); font-weight: 500; color: var(--text-secondary); border-bottom: 3px solid transparent; }
  .tab-btn:hover { background: rgba(74, 144, 226, 0.05); color: var(--primary-blue); } /* Hover más sutil */
  .tab-btn.active { background: white; color: var(--primary-blue); border-bottom-color: var(--primary-blue); }
  .tab-content { padding: 30px; display: none; }
  .tab-content.active { display: block; animation: fadeInUp 0.4s ease forwards; }

  /* Description Tab */
  .description-container { max-width: 800px; margin: 0 auto; /* Centrar contenido */ }
  .problem-statement h2 { font-size: 1.5rem; font-weight: 700; color: var(--text-primary); margin-bottom: 25px; padding-bottom: 15px; border-bottom: 2px solid var(--border-light); }
  .problem-content h3 { font-size: 1.2rem; font-weight: 600; color: var(--text-primary); margin: 25px 0 15px 0; }
  .problem-content p { margin-bottom: 15px; line-height: 1.7; }
  .problem-content ul { margin: 15px 0; padding-left: 20px; }
  .problem-content li { margin-bottom: 8px; line-height: 1.6; }
  .specifications { display: flex; flex-direction: column; gap: 10px; margin: 15px 0; }
  .spec-item { padding: 12px 15px; background: var(--neutral-light); border-radius: 8px; border-left: 4px solid var(--primary-blue); }
  .examples { display: flex; flex-direction: column; gap: 20px; margin: 20px 0; }
  .example { border: 1px solid var(--border-light); border-radius: 8px; overflow: hidden; }
  .example h4 { background: var(--neutral-light); padding: 10px 15px; margin: 0; font-weight: 600; color: var(--text-primary); }
  .example-content { padding: 15px; }
  .input-output { display: flex; flex-direction: column; gap: 10px; }
  .input, .output { padding: 10px; border-radius: 6px; }
  .input { background: rgba(74, 144, 226, 0.08); } /* Más sutil */
  .output { background: rgba(39, 174, 96, 0.08); } /* Más sutil */
  /* Criterios y Sugerencias eliminados */

  /* Submission Tab (sin cambios visuales mayores) */
  .submission-container { display: grid; grid-template-columns: 2fr 1fr; gap: 30px; }
  .submission-area h2 { font-size: 1.5rem; font-weight: 700; color: var(--text-primary); margin-bottom: 25px; }
  .upload-area { border: 2px dashed var(--border-light); border-radius: var(--border-radius); padding: 40px 20px; text-align: center; cursor: pointer; transition: var(--transition); background: var(--neutral-light); }
  .upload-area:hover { border-color: var(--primary-blue); background: rgba(74, 144, 226, 0.05); }
  .upload-area.dragover { border-color: var(--primary-blue); background: rgba(74, 144, 226, 0.1); }
  .upload-icon { font-size: 3rem; color: var(--text-secondary); margin-bottom: 15px; }
  .upload-text h3 { font-size: 1.2rem; font-weight: 600; color: var(--text-primary); margin-bottom: 8px; }
  .upload-text p { color: var(--text-secondary); margin-bottom: 15px; }
  .browse-link { color: var(--primary-blue); cursor: pointer; text-decoration: underline; }
  .upload-requirements { color: var(--text-secondary); font-size: 0.85rem; }
  .uploaded-files { margin-top: 20px; }
  .file-item { display: flex; align-items: center; justify-content: space-between; padding: 12px 15px; background: var(--neutral-light); border-radius: 8px; margin-bottom: 10px; }
  .file-info { display: flex; align-items: center; gap: 10px; }
  .file-icon { color: var(--java-color); font-size: 1.2rem; }
  .file-details { display: flex; flex-direction: column; }
  .file-name { font-weight: 600; color: var(--text-primary); }
  .file-size { font-size: 0.85rem; color: var(--text-secondary); }
  .file-actions { display: flex; gap: 8px; }
  .btn-icon { padding: 6px; border: none; background: none; cursor: pointer; border-radius: 4px; transition: var(--transition); color: var(--text-secondary); }
  .btn-icon:hover { background: var(--border-light); }
  .btn-icon.danger:hover { background: rgba(231, 76, 60, 0.1); color: var(--error); }
  .submission-actions { display: flex; gap: 15px; margin-top: 30px; }
  .btn-primary, .btn-secondary { display: flex; align-items: center; gap: 8px; padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: var(--transition); font-size: 0.95rem; }
  .btn-primary { background: var(--primary-blue); color: white; }
  .btn-primary:hover:not(:disabled) { background: #3a7bd5; transform: translateY(-2px); }
  .btn-primary:disabled { background: var(--text-secondary); cursor: not-allowed; opacity: 0.7; }
  .btn-secondary { background: var(--neutral-light); color: var(--text-secondary); border: 1px solid var(--border-light); }
  .btn-secondary:hover { background: var(--border-light); color: var(--text-primary); }
  .submission-info { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; padding: 15px; background: var(--neutral-light); border-radius: 8px; }
  .info-item { display: flex; align-items: center; gap: 8px; font-size: 0.9rem; color: var(--text-secondary); }
  .info-item .urgent { color: var(--error); font-weight: 600; }
  .submission-history { padding: 20px; background: var(--neutral-light); border-radius: var(--border-radius); height: fit-content; }
  .submission-history h3 { font-size: 1.1rem; font-weight: 600; color: var(--text-primary); margin-bottom: 15px; }
  .history-empty { text-align: center; padding: 30px 20px; color: var(--text-secondary); }
  .history-empty i { font-size: 2rem; margin-bottom: 10px; opacity: 0.5; }

  /* --- CAMBIO: IDE Activity Styles (Dark Theme) --- */
  .ide-activity { background-color: var(--ide-bg); /* Fondo oscuro general */ }

  /* IDE Description Section - Estilo igual que upload description */
  .ide-description-section {
    background: white;
    padding: 30px 40px;
    border-bottom: 1px solid var(--border-light);
  }

  .ide-description-section .description-container {
    max-width: 900px;
    margin: 0 auto;
  }

  .ide-description-section .problem-statement h2 {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid var(--border-light);
  }

  .ide-description-section .problem-content h3 {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 25px 0 15px 0;
  }

  .ide-description-section .problem-content p {
    margin-bottom: 15px;
    line-height: 1.7;
    color: var(--text-primary);
  }

  .ide-description-section .problem-content ul {
    margin: 15px 0;
    padding-left: 20px;
  }

  .ide-description-section .problem-content li {
    margin-bottom: 8px;
    line-height: 1.6;
  }

  .ide-description-section .specifications {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin: 15px 0;
  }

  .ide-description-section .spec-item {
    padding: 12px 15px;
    background: var(--neutral-light);
    border-radius: 8px;
    border-left: 4px solid var(--primary-blue);
  }

  .ide-description-section .examples {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin: 20px 0;
  }

  .ide-description-section .example {
    border: 1px solid var(--border-light);
    border-radius: 8px;
    overflow: hidden;
  }

  .ide-description-section .example h4 {
    background: var(--neutral-light);
    padding: 10px 15px;
    margin: 0;
    font-weight: 600;
    color: var(--text-primary);
  }

  .ide-description-section .example-content {
    padding: 15px;
  }

  .ide-description-section .input-output {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .ide-description-section .input,
  .ide-description-section .output {
    padding: 10px;
    border-radius: 6px;
  }

  .ide-description-section .input {
    background: rgba(74, 144, 226, 0.08);
  }

  .ide-description-section .output {
    background: rgba(39, 174, 96, 0.08);
  }

  .ide-description-section .output pre {
    margin-top: 8px;
    padding: 10px;
    background: rgba(0, 0, 0, 0.05);
    border-radius: 4px;
    font-family: "JetBrains Mono", monospace;
    font-size: 0.85rem;
    line-height: 1.6;
    overflow-x: auto;
  }

  /* Test Cases Info */
  .test-cases-info {
    margin-top: 25px;
    padding: 20px;
    background: var(--neutral-light);
    border-radius: 8px;
    border-left: 4px solid var(--primary-green);
  }

  .test-cases-info p {
    margin-bottom: 15px;
    font-weight: 500;
  }

  .test-case-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .test-case-item {
    display: flex;
    gap: 10px;
    padding: 10px 15px;
    background: white;
    border-radius: 6px;
    border: 1px solid var(--border-light);
  }

  .test-number {
    font-weight: 600;
    color: var(--primary-blue);
    min-width: 60px;
  }

  .test-desc {
    color: var(--text-secondary);
  }

  /* IDE Workspace Full - Sin división izquierda/derecha */
  .ide-workspace-full {
    display: flex;
    flex-direction: column;
    height: calc(100vh - var(--nav-height) - 220px);
    min-height: 500px;
    background: var(--ide-bg);
  }

  .ide-workspace-full .code-editor-section {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 300px;
    overflow: hidden;
  }

  .ide-workspace-full .editor-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 20px;
    background: var(--ide-bg-lightest);
    border-bottom: 1px solid var(--ide-border);
    color: var(--ide-text);
  }

  .ide-workspace-full .editor-title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 500;
    font-size: 1rem;
  }

  .ide-workspace-full .editor-title i {
    color: var(--java-color);
    font-size: 1.2rem;
  }

  .ide-workspace-full .editor-actions {
    display: flex;
    gap: 10px;
  }

  .btn-ide {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    border: none;
    border-radius: 6px;
    font-weight: 500;
    font-size: 0.9rem;
    cursor: pointer;
    transition: var(--transition);
  }

  .btn-ide.execute {
    background: var(--primary-green);
    color: white;
  }

  .btn-ide.execute:hover {
    background: #6bc919;
    transform: translateY(-2px);
  }

  .btn-ide.hint {
    background: var(--accent-yellow);
    color: white;
  }

  .btn-ide.hint:hover {
    background: #e39712;
    transform: translateY(-2px);
  }

  .btn-ide.submit {
    background: var(--primary-blue);
    color: white;
  }

  .btn-ide.submit:hover {
    background: #3a7bd5;
    transform: translateY(-2px);
  }

  .ide-workspace-full .console-section {
    height: 200px;
    display: flex;
    flex-direction: column;
    border-top: 1px solid var(--ide-border);
    background-color: var(--ide-bg-lighter);
    flex-shrink: 0;
  }

  .ide-header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 15px 25px; /* Ligeramente menos padding */
    border-bottom: 1px solid var(--ide-border);
    background: var(--ide-bg-lightest); /* Fondo cabecera IDE */
    color: var(--ide-text); /* Texto claro */
  }
  .ide-header h2 { font-size: 1.3rem; font-weight: 600; } /* Tamaño ajustado */
  .ide-status { display: flex; align-items: center; gap: 20px; }
  .progress-indicator { display: flex; flex-direction: column; align-items: flex-end; gap: 5px; }
  .progress-text { font-size: 0.85rem; color: var(--ide-text-secondary); font-weight: 500; }
  .progress-bar { width: 100px; height: 5px; background: var(--ide-border); border-radius: 3px; overflow: hidden; } /* Ancho reducido */
  .progress-fill { height: 100%; background: linear-gradient(90deg, var(--ide-accent), var(--primary-green)); border-radius: 3px; transition: width 1s ease; }
  .save-status { display: flex; align-items: center; gap: 6px; font-size: 0.8rem; color: var(--ide-text-secondary); } /* Tamaño reducido */

  /* OLD - .ide-workspace { */
    display: grid;
    /* CAMBIO: Layout ajustado (1 parte izquierda, 2 partes derecha) */
    grid-template-columns: 1.2fr 2.8fr;
    /* CAMBIO: Altura definida, puede ajustarse */
    height: calc(100vh - var(--nav-height) - 120px); /* Ajusta 150px según altura de header+selector */
    min-height: 600px; /* Altura mínima */
    border-top: 1px solid var(--ide-border);
  }

  /* OLD - .workspace-left { */
    display: flex; flex-direction: column;
    border-right: 1px solid var(--ide-border);
    background-color: var(--ide-bg-lighter); /* Fondo columna izquierda */
    overflow: hidden; /* Evita que contenido desborde */
  }

  /* OLD - .workspace-right { */
    display: flex; flex-direction: column; /* Apila editor y consola */
    background-color: var(--ide-bg); /* Fondo columna derecha */
    overflow: hidden; /* Evita que contenido desborde */
  }

  /* Descripción del problema en IDE */
  .problem-section {
  /* Nueva sección combinada de problema y casos de prueba */
  .problem-and-tests-section {
      display: flex;
      flex-direction: column;
      height: 100%;
      background: var(--ide-bg-lighter);
  }
  
  .section-header-combined {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 15px;
      background: var(--ide-bg-lightest);
      border-bottom: 1px solid var(--ide-border);
      color: var(--ide-text);
      flex-shrink: 0;
  }
  
  .section-header-combined h3 {
      font-size: 0.95rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
  }
  
  .section-header-combined .btn-icon {
      color: var(--ide-success);
      font-size: 0.9rem;
      padding: 6px 10px;
  }
  
  .section-header-combined .btn-icon:hover {
      background: var(--ide-bg);
      color: lightgreen;
  }
  
  .scrollable-content {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
  }
  
  .scrollable-content::-webkit-scrollbar {
      width: 8px;
  }
  
  .scrollable-content::-webkit-scrollbar-track {
      background: var(--ide-bg-lighter);
  }
  
  .scrollable-content::-webkit-scrollbar-thumb {
      background: var(--ide-text-secondary);
      border-radius: 4px;
  }
  
  .scrollable-content::-webkit-scrollbar-thumb:hover {
      background: #555;
  }
  
  .problem-content-ide h4 {
      font-size: 1rem;
      font-weight: 600;
      color: var(--ide-text);
      margin-bottom: 12px;
      margin-top: 15px;
  }
  
  .problem-content-ide h4:first-child {
      margin-top: 0;
  }
  
  .problem-content-ide p {
      margin-bottom: 12px;
      line-height: 1.6;
      font-size: 0.9rem;
      color: var(--ide-text);
  }
  
  .problem-content-ide .problem-example {
      margin: 15px 0;
      padding: 12px;
      background: var(--ide-bg);
      border-radius: 6px;
      border-left: 3px solid var(--ide-accent);
      font-size: 0.85rem;
  }
  
  .problem-content-ide .problem-example strong {
      color: var(--ide-text);
      display: block;
      margin-bottom: 8px;
  }
  
  .problem-content-ide .problem-example pre {
      font-family: "JetBrains Mono", monospace;
      font-size: 0.85rem;
      line-height: 1.5;
      color: var(--ide-text);
      margin: 0;
  }
  
  .problem-content-ide .test-cases {
      margin-top: 15px;
  }
      padding: 15px 20px; /* Menos padding */
      border-bottom: 1px solid var(--ide-border);
      background: var(--ide-bg-lighter);
      color: var(--ide-text);
      max-height: 40%; /* Limita altura inicial */
      overflow-y: auto; /* Scroll si es necesario */
      flex-shrink: 0; /* No se encoje */
  }
  .problem-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
  .problem-header h3 { font-size: 1rem; font-weight: 600; } /* Más pequeño */
  .problem-actions .btn-icon { color: var(--ide-text-secondary); }
  .problem-actions .btn-icon:hover { background: var(--ide-bg-lightest); color: var(--ide-text); }
  .problem-content p { margin-bottom: 8px; line-height: 1.5; font-size: 0.9rem; }
  .problem-example { margin-top: 10px; padding: 10px; background: var(--ide-bg); border-radius: 6px; border-left: 3px solid var(--ide-accent); font-size: 0.85rem; }
  .problem-example strong { color: var(--ide-text); }
  .problem-example pre { font-family: "JetBrains Mono", monospace; font-size: 0.85rem; margin-top: 5px; line-height: 1.4; color: var(--ide-text); }

   /* Test cases section */
  .test-cases-section {
      flex: 1; /* Ocupa espacio restante en columna izquierda */
      display: flex; flex-direction: column;
      min-height: 150px; /* Altura mínima */
  }
  .test-cases-section .section-header { /* Estilo cabecera específico */
      padding: 10px 15px;
      background: var(--ide-bg-lightest);
      border-bottom: 1px solid var(--ide-border);
      color: var(--ide-text);
  }
   .test-cases-section .section-header h3 { font-size: 0.9rem; }
   .test-cases-section .section-header .btn-icon { color: var(--ide-success); }
   .test-cases-section .section-header .btn-icon:hover { background: var(--ide-bg); color: lightgreen; }

  .test-cases { flex: 1; overflow-y: auto; padding: 10px; } /* Padding reducido */
  .test-case { background: var(--ide-bg); border: 1px solid var(--ide-border); border-radius: 6px; margin-bottom: 10px; overflow: hidden; }
  .test-header { display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; background: var(--ide-bg-lightest); border-bottom: 1px solid var(--ide-border); }
  .test-title { font-weight: 500; font-size: 0.85rem; color: var(--ide-text); }
  .test-status { display: flex; align-items: center; gap: 4px; font-size: 0.75rem; padding: 3px 6px; border-radius: 10px; }
  .test-status.pending { background: rgba(255, 215, 0, 0.2); color: var(--ide-warning); } /* Amarillo */
  .test-status.passed { background: rgba(78, 201, 176, 0.2); color: var(--ide-success); } /* Verde azulado */
  .test-status.failed { background: rgba(244, 71, 71, 0.2); color: var(--ide-error); } /* Rojo */
  .test-content { padding: 10px 12px; font-size: 0.85rem; color: var(--ide-text-secondary); }
  .test-input, .test-expected { margin-bottom: 5px; }
  .test-expected pre { font-family: "JetBrains Mono", monospace; font-size: 0.8rem; margin-top: 5px; padding: 8px; background: var(--ide-bg-lighter); border-radius: 4px; line-height: 1.3; color: var(--ide-text); border: 1px solid var(--ide-border); }

  /* Code editor section */
  .code-editor-section {
      flex: 1; /* Ocupa el espacio principal en columna derecha */
      display: flex; flex-direction: column;
      min-height: 350px; /* Altura mínima */
      position: relative; /* Para posicionar footer */
      overflow: hidden; /* Evita que el editor desborde */
  }
  .editor-header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 10px 15px; /* Menos padding */
      background: var(--ide-bg-lightest);
      border-bottom: 1px solid var(--ide-border);
      color: var(--ide-text);
  }
  .editor-title { display: flex; align-items: center; gap: 8px; font-weight: 500; font-size: 0.9rem; } /* Más pequeño */
  .editor-title i { color: var(--java-color); }
  .editor-actions { display: flex; gap: 5px; } /* Menos gap */
  .editor-actions .btn-icon { color: var(--ide-text-secondary); font-size: 0.9rem; }
  .editor-actions .btn-icon:hover { background: var(--ide-bg); color: var(--ide-text); }

  .code-editor {
      flex: 1; /* Ocupa espacio restante */
      display: flex;
      position: relative; /* Para scroll sync */
      overflow: hidden; /* Contiene textarea */
      background: var(--ide-bg); /* Fondo editor */
  }
  .line-numbers {
      background: var(--ide-bg-lighter); /* Fondo gutter */
      padding: 15px 10px;
      border-right: 1px solid var(--ide-border);
      font-family: "JetBrains Mono", monospace;
      font-size: 0.9rem; /* Consistente con code input */
      line-height: 1.6;
      color: var(--ide-text-secondary); /* Color números */
      user-select: none;
      min-width: 50px; text-align: right;
      overflow: hidden; /* Evita scroll horizontal */
      height: 100%; /* Ocupa altura */
  }
  .line-numbers span { display: block; height: calc(0.9rem * 1.6); /* Ajustar a font-size * line-height */ }

  .code-input {
      flex: 1; border: none; outline: none;
      padding: 15px;
      font-family: "JetBrains Mono", monospace;
      font-size: 0.9rem;
      line-height: 1.6;
      resize: none;
      background: transparent; /* Fondo transparente, hereda de .code-editor */
      color: var(--ide-text); /* Texto claro */
      width: 100%; height: 100%; /* Ocupa todo el espacio */
      overflow: auto; /* Scroll si es necesario */
      caret-color: var(--ide-text); /* Color del cursor */
  }
   /* Estilo scrollbar para Chrome/Safari */
   .code-input::-webkit-scrollbar { width: 8px; }
   .code-input::-webkit-scrollbar-track { background: var(--ide-bg-lighter); }
   .code-input::-webkit-scrollbar-thumb { background: var(--ide-text-secondary); border-radius: 4px; }
   .code-input::-webkit-scrollbar-thumb:hover { background: #555; }


  /* CAMBIO: Consola movida abajo */
  .console-section {
      height: 180px; /* Altura fija para la consola */
      display: flex; flex-direction: column;
      border-top: 1px solid var(--ide-border);
      background-color: var(--ide-bg-lighter); /* Fondo consola */
      flex-shrink: 0; /* No se encoje */
  }
   .console-section .section-header { /* Estilo cabecera específico */
      padding: 10px 15px;
      background: var(--ide-bg-lightest);
      border-bottom: 1px solid var(--ide-border);
      color: var(--ide-text);
  }
   .console-section .section-header h3 { font-size: 0.9rem; }
   .console-section .section-header .btn-icon { color: var(--ide-text-secondary); }
   .console-section .section-header .btn-icon:hover { background: var(--ide-bg); color: var(--ide-error); }

  .console-output {
      flex: 1; padding: 10px 15px; /* Menos padding */
      background: var(--ide-bg); /* Fondo salida consola */
      color: var(--ide-text);
      font-family: "JetBrains Mono", monospace;
      font-size: 0.85rem; overflow-y: auto; line-height: 1.4;
  }
   /* Estilo scrollbar para consola */
   .console-output::-webkit-scrollbar { width: 6px; }
   .console-output::-webkit-scrollbar-track { background: var(--ide-bg-lighter); }
   .console-output::-webkit-scrollbar-thumb { background: var(--ide-text-secondary); border-radius: 3px; }
   .console-output::-webkit-scrollbar-thumb:hover { background: #555; }

  .console-line { margin-bottom: 4px; display: flex; gap: 8px; } /* Menos gap/margin */
  .timestamp { color: var(--ide-text-secondary); flex-shrink: 0;}
  .message { word-break: break-all; } /* Rompe líneas largas */
  .console-line.info .message { color: var(--ide-success); } /* Verde más brillante */
  .console-line.error .message { color: var(--ide-error); } /* Rojo */
  .console-line.warning .message { color: var(--ide-warning); } /* Amarillo */

  /* CAMBIO: Footer del Editor con nuevos botones */
  .editor-footer {
      display: flex; justify-content: space-between; align-items: center;
      padding: 8px 15px; /* Menos padding */
      background: var(--ide-bg-lightest);
      border-top: 1px solid var(--ide-border);
      color: var(--ide-text-secondary);
      flex-shrink: 0; /* No se encoje */
  }
  .editor-info { display: flex; gap: 15px; font-size: 0.8rem; } /* Más pequeño */
  .editor-actions-bottom { display: flex; gap: 10px; }

   /* Estilos para los nuevos botones del IDE */
  .btn-ide {
      display: flex; align-items: center; gap: 6px;
      padding: 8px 16px; /* Tamaño medio */
      border: none; border-radius: 6px; /* Menos redondeo */
      font-weight: 500; /* Menos bold */
      cursor: pointer; transition: var(--transition);
      font-size: 0.9rem;
      background: var(--ide-bg-lightest); /* Fondo base */
      color: var(--ide-text);
      border: 1px solid var(--ide-border); /* Borde sutil */
  }
   .btn-ide:hover {
       background: var(--ide-bg); /* Fondo más oscuro al hover */
       border-color: var(--ide-text-secondary);
   }

  .btn-ide.execute { color: var(--ide-success); border-color: var(--ide-success); }
  .btn-ide.execute:hover { background: rgba(78, 201, 176, 0.1); }

  .btn-ide.hint { color: var(--ide-accent); border-color: var(--ide-accent); }
  .btn-ide.hint:hover { background: rgba(74, 144, 226, 0.1); }

  .btn-ide.submit { background: var(--ide-accent); color: white; border-color: var(--ide-accent); }
  .btn-ide.submit:hover { background: #3a7bd5; }


  /* Responsive Design */
  @media (max-width: 1200px) {
    .activity-header { flex-direction: column; gap: 20px; text-align: center; }
    .submission-container { grid-template-columns: 1fr; }
    .ide-workspace {
        grid-template-columns: 1fr; /* Apila columnas */
        height: auto; /* Altura automática */
    }
    .workspace-left {
        border-right: none;
        border-bottom: 1px solid var(--ide-border);
        flex-direction: row; /* Problema y tests lado a lado si caben */
        max-height: none; /* Quita límite de altura */
    }
     .problem-section { max-height: 300px; flex: 1; border-bottom: none; border-right: 1px solid var(--ide-border);} /* Problema a la izquierda */
  /* Nueva sección combinada de problema y casos de prueba */
  .problem-and-tests-section {
      display: flex;
      flex-direction: column;
      height: 100%;
      background: var(--ide-bg-lighter);
  }
  
  .section-header-combined {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 15px;
      background: var(--ide-bg-lightest);
      border-bottom: 1px solid var(--ide-border);
      color: var(--ide-text);
      flex-shrink: 0;
  }
  
  .section-header-combined h3 {
      font-size: 0.95rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
  }
  
  .section-header-combined .btn-icon {
      color: var(--ide-success);
      font-size: 0.9rem;
      padding: 6px 10px;
  }
  
  .section-header-combined .btn-icon:hover {
      background: var(--ide-bg);
      color: lightgreen;
  }
  
  .scrollable-content {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
  }
  
  .scrollable-content::-webkit-scrollbar {
      width: 8px;
  }
  
  .scrollable-content::-webkit-scrollbar-track {
      background: var(--ide-bg-lighter);
  }
  
  .scrollable-content::-webkit-scrollbar-thumb {
      background: var(--ide-text-secondary);
      border-radius: 4px;
  }
  
  .scrollable-content::-webkit-scrollbar-thumb:hover {
      background: #555;
  }
  
  .problem-content-ide h4 {
      font-size: 1rem;
      font-weight: 600;
      color: var(--ide-text);
      margin-bottom: 12px;
      margin-top: 15px;
  }
  
  .problem-content-ide h4:first-child {
      margin-top: 0;
  }
  
  .problem-content-ide p {
      margin-bottom: 12px;
      line-height: 1.6;
      font-size: 0.9rem;
      color: var(--ide-text);
  }
  
  .problem-content-ide .problem-example {
      margin: 15px 0;
      padding: 12px;
      background: var(--ide-bg);
      border-radius: 6px;
      border-left: 3px solid var(--ide-accent);
      font-size: 0.85rem;
  }
  
  .problem-content-ide .problem-example strong {
      color: var(--ide-text);
      display: block;
      margin-bottom: 8px;
  }
  
  .problem-content-ide .problem-example pre {
      font-family: "JetBrains Mono", monospace;
      font-size: 0.85rem;
      line-height: 1.5;
      color: var(--ide-text);
      margin: 0;
  }
  
  .problem-content-ide .test-cases {
      margin-top: 15px;
  }
     .test-cases-section { max-height: 300px; flex: 1; } /* Tests a la derecha */

    .workspace-right { height: 60vh; } /* Altura fija para editor+consola */
  }

  @media (max-width: 768px) {
    .nav-container { padding: 0 15px; }
    .nav-menu { display: none; }
    .activity-main { padding: 20px 15px; }
    .activity-header { padding: 20px; }
    .header-left { flex-direction: column; gap: 15px; width: 100%; align-items: center; } /* Centra botón y título */
     .back-button-link { width: 100%; text-align: center; } /* Botón ocupa ancho */
     .back-button { display: inline-flex; width: auto; } /* Botón no ocupa todo el ancho */

    .activity-meta { justify-content: center; width: 100%; margin-top: 15px;}
    .tab-content { padding: 20px; }
    .submission-actions { flex-direction: column; align-items: stretch; } /* Botones ocupan ancho */
     .btn-primary, .btn-secondary { justify-content: center; } /* Centra texto e icono */

    /* IDE Layout en móvil */
    .workspace-left { flex-direction: column; max-height: 40vh; } /* Vuelve a apilar problema y tests */
    .problem-section { border-right: none; border-bottom: 1px solid var(--ide-border); max-height: 180px; }
  /* Nueva sección combinada de problema y casos de prueba */
  .problem-and-tests-section {
      display: flex;
      flex-direction: column;
      height: 100%;
      background: var(--ide-bg-lighter);
  }
  
  .section-header-combined {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 15px;
      background: var(--ide-bg-lightest);
      border-bottom: 1px solid var(--ide-border);
      color: var(--ide-text);
      flex-shrink: 0;
  }
  
  .section-header-combined h3 {
      font-size: 0.95rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
  }
  
  .section-header-combined .btn-icon {
      color: var(--ide-success);
      font-size: 0.9rem;
      padding: 6px 10px;
  }
  
  .section-header-combined .btn-icon:hover {
      background: var(--ide-bg);
      color: lightgreen;
  }
  
  .scrollable-content {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
  }
  
  .scrollable-content::-webkit-scrollbar {
      width: 8px;
  }
  
  .scrollable-content::-webkit-scrollbar-track {
      background: var(--ide-bg-lighter);
  }
  
  .scrollable-content::-webkit-scrollbar-thumb {
      background: var(--ide-text-secondary);
      border-radius: 4px;
  }
  
  .scrollable-content::-webkit-scrollbar-thumb:hover {
      background: #555;
  }
  
  .problem-content-ide h4 {
      font-size: 1rem;
      font-weight: 600;
      color: var(--ide-text);
      margin-bottom: 12px;
      margin-top: 15px;
  }
  
  .problem-content-ide h4:first-child {
      margin-top: 0;
  }
  
  .problem-content-ide p {
      margin-bottom: 12px;
      line-height: 1.6;
      font-size: 0.9rem;
      color: var(--ide-text);
  }
  
  .problem-content-ide .problem-example {
      margin: 15px 0;
      padding: 12px;
      background: var(--ide-bg);
      border-radius: 6px;
      border-left: 3px solid var(--ide-accent);
      font-size: 0.85rem;
  }
  
  .problem-content-ide .problem-example strong {
      color: var(--ide-text);
      display: block;
      margin-bottom: 8px;
  }
  
  .problem-content-ide .problem-example pre {
      font-family: "JetBrains Mono", monospace;
      font-size: 0.85rem;
      line-height: 1.5;
      color: var(--ide-text);
      margin: 0;
  }
  
  .problem-content-ide .test-cases {
      margin-top: 15px;
  }
    .test-cases-section { max-height: 180px; }
    .workspace-right { height: 60vh; } /* Mantiene altura editor+consola */
     .code-editor { min-height: 180px; } /* Mínimo editor */
     .console-section { height: 150px; } /* Consola más pequeña */
     .editor-footer { flex-direction: column; gap: 10px; padding: 10px; } /* Apila info y botones */
     .editor-actions-bottom { width: 100%; justify-content: space-around; } /* Botones distribuidos */
     .btn-ide { padding: 6px 12px; font-size: 0.8rem; } /* Botones más pequeños */
  }

  /* Animations */
  @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
  .activity-content.active { animation: fadeInUp 0.5s ease forwards; }
  .tab-content.active { animation: fadeInUp 0.4s ease forwards; }

</style>
<script>
  // Variables globales
  let currentActivity = { type: "upload", /* ... otros datos ... */ };
  let uploadedFiles = [];
  let codeContent = getInitialCode(); // Carga inicial
  let isDirty = false;

  // Inicialización
  document.addEventListener("DOMContentLoaded", function () {
    initializeActivityView();
    setupEventListeners();
    loadActivityContent(); // Carga tipo de actividad inicial
  });

  function initializeActivityView() {
    setupFileUpload(); // Configura incluso si no está visible inicialmente
    setupCodeEditor(); // Configura incluso si no está visible inicialmente
    console.log("🎯 Vista individual de actividad inicializada");
  }

  function setupEventListeners() {
    // CAMBIO: Enlaces de Navbar ahora son manejados por href

    // Botón Volver
    document.getElementById("backToActivities")?.addEventListener("click", (e) => {
        // El enlace <a> maneja la navegación, solo prevenimos si hay cambios
        if (isDirty) {
            if (!confirm("Tienes cambios sin guardar. ¿Estás seguro de que quieres salir?")) {
                e.preventDefault(); // Cancela la navegación del enlace <a>
            }
        }
        // Si no hay cambios o confirma, el enlace <a> funcionará
    });

    // Selector de Tipo de Actividad
    document.querySelectorAll(".type-selector-btn").forEach((btn) => {
      btn.addEventListener("click", handleActivityTypeChange);
    });

    // Tabs (si existen)
    document.querySelectorAll(".tab-btn").forEach((btn) => {
      btn.addEventListener("click", handleTabChange);
    });

    // Botones Actividad Upload
    document.getElementById("saveDraftBtn")?.addEventListener("click", saveDraft);
    document.getElementById("submitBtn")?.addEventListener("click", submitActivity);

    // Botones Actividad IDE (Nuevos)
    document.getElementById("runCodeBtn")?.addEventListener("click", handleRunCode);
    document.getElementById("aiHintBtn")?.addEventListener("click", handleAiHint);
    document.getElementById("submitIdeBtn")?.addEventListener("click", handleSubmitIde);

    // Otros botones IDE
    document.getElementById("runTests")?.addEventListener("click", runTests);
    document.getElementById("clearConsole")?.addEventListener("click", clearConsole);
    document.getElementById("formatCode")?.addEventListener("click", formatCode);
    document.getElementById("resetCode")?.addEventListener("click", resetCode);


    // Code editor
    const codeInput = document.getElementById("codeInput");
    if (codeInput) {
      codeInput.addEventListener("input", handleCodeChange);
      codeInput.addEventListener("scroll", syncEditorScroll); // Cambiado
      // Sincronización inicial
      requestAnimationFrame(updateLineNumbers);
      requestAnimationFrame(syncEditorScroll);
    }

    // Cambios sin guardar
    window.addEventListener("beforeunload", (e) => {
      if (isDirty) { e.preventDefault(); e.returnValue = ""; }
    });
  }

  function loadActivityContent() {
      // Determina qué actividad mostrar inicialmente (podría venir de URL)
      // Por ahora, forzamos 'upload' como activa por defecto basado en HTML
      const initialType = document.querySelector('.type-selector-btn.active')?.dataset.type || 'upload';
      currentActivity.type = initialType;
      switchActivityView(initialType); // Asegura que la vista correcta esté activa
      updateActivityHeader(); // Actualiza header para la actividad inicial

      // Simular carga de contenido guardado
      setTimeout(() => {
          if (currentActivity.type === "ide") {
              addConsoleMessage("Sesión restaurada", "info");
              addConsoleMessage("Listo para continuar programando", "info");
              // Cargar código guardado si existe
              // codeInput.value = localStorage.getItem('ideCodeDraft') || getInitialCode();
              // codeContent = codeInput.value;
              // updateLineNumbers();
          } else {
              // Cargar archivos subidos si existen
          }
      }, 500); // Pequeño delay
  }


  function updateActivityHeader() {
    const activityData = getActivityData(currentActivity.type);
    // CAMBIO: Breadcrumb eliminado
    document.getElementById("activityTitle").textContent = activityData.title;
    document.getElementById("activityTopic").textContent = `${activityData.topic} • Java Fundamentos`;
    updateBadge("difficultyBadge", activityData.difficulty, "difficulty");
    updateBadge("typeBadge", activityData.type, "type");
    updateBadge("dueBadge", activityData.dueStatus, "due");
    updateBadge("statusBadge", activityData.status, "status");
  }

  function getActivityData(type) {
    const activities = {
      upload: { title: "Números Primos", topic: "Ciclos For", difficulty: "hard", type: "upload", status: "pending", dueStatus: "urgent", dueText: "Vence mañana" },
      ide: { title: "Tabla de Multiplicar", topic: "Ciclos For", difficulty: "medium", type: "ide", status: "progress", dueStatus: "normal", dueText: "Vence en 3 días" }
    };
    return activities[type] || activities.upload;
  }

  function updateBadge(badgeId, value, type) {
    const badge = document.getElementById(badgeId);
    if (!badge) return;
    const currentClasses = badge.className.split(' ').filter(cls => !cls.match(/^(easy|medium|hard|upload|ide|urgent|normal|pending|progress|completed)$/));
    badge.className = [...currentClasses, value].join(' ');

    const span = badge.querySelector("span");
    const icon = badge.querySelector("i");

    switch (type) {
        case "difficulty":
            span.textContent = value === "hard" ? "Difícil" : value === "medium" ? "Intermedio" : "Fácil";
            break;
        case "type":
            icon.className = value === "upload" ? "fas fa-upload" : "fas fa-code";
            span.textContent = value === "upload" ? "Subir Archivo" : "IDE Integrado";
            break;
        case "due":
            const activityData = getActivityData(currentActivity.type);
            span.textContent = activityData.dueText;
            icon.className = value === "urgent" ? "fas fa-exclamation-circle" : "fas fa-calendar-alt"; // Icono ajustado
            break;
        case "status":
            const statusText = { pending: "Pendiente", progress: "En Progreso", completed: "Completada", overdue: "Vencida" };
            const statusIcon = { pending: "fa-clock", progress: "fa-play-circle", completed: "fa-check-circle", overdue: "fa-exclamation-triangle"};
            span.textContent = statusText[value] || "Pendiente";
            icon.className = `fas ${statusIcon[value] || 'fa-clock'}`;
            break;
    }
  }


  function handleActivityTypeChange(event) {
    if (isDirty) {
        if (!confirm("Tienes cambios sin guardar en la actividad actual. ¿Estás seguro de que quieres cambiar?")) {
            return;
        }
    }

    const btn = event.currentTarget;
    const type = btn.getAttribute("data-type");

    if (type === currentActivity.type) return; // No hacer nada si ya está activo

    document.querySelectorAll(".type-selector-btn").forEach((b) => b.classList.remove("active"));
    btn.classList.add("active");

    switchActivityView(type);
    isDirty = false; // Resetear dirty flag al cambiar
  }

  function switchActivityView(type) {
      currentActivity.type = type;
      document.querySelectorAll(".activity-content").forEach((content) => {
        content.classList.remove("active");
      });
      const targetView = document.getElementById(type === 'upload' ? 'uploadActivity' : 'ideActivity');
      if(targetView) {
          targetView.classList.add("active");
          updateActivityHeader(); // Actualiza header con la info de la nueva actividad
          showNotification(`Cambiando a: ${getActivityData(type).title}`, "info");
      }
  }

  function handleTabChange(event) {
    const btn = event.currentTarget;
    const tabName = btn.getAttribute("data-tab");
    document.querySelectorAll(".tab-btn").forEach((b) => b.classList.remove("active"));
    btn.classList.add("active");
    document.querySelectorAll(".tab-content").forEach((content) => content.classList.remove("active"));
    document.getElementById(tabName + "Tab").classList.add("active");
  }

  // --- Funciones Upload (sin cambios mayores) ---
  function setupFileUpload() { /* ... igual que antes ... */
    const uploadArea = document.getElementById("uploadArea");
    const fileInput = document.getElementById("fileInput");
    const browseLink = document.querySelector(".browse-link");

    if (!uploadArea || !fileInput) return;
    uploadArea.addEventListener("click", () => fileInput.click());
    browseLink.addEventListener("click", (e) => { e.stopPropagation(); fileInput.click(); });
    uploadArea.addEventListener("dragover", (e) => { e.preventDefault(); uploadArea.classList.add("dragover"); });
    uploadArea.addEventListener("dragleave", () => uploadArea.classList.remove("dragover"));
    uploadArea.addEventListener("drop", (e) => { e.preventDefault(); uploadArea.classList.remove("dragover"); handleFileUpload(Array.from(e.dataTransfer.files)); });
    fileInput.addEventListener("change", (e) => handleFileUpload(Array.from(e.target.files)));
  }
  function handleFileUpload(files) { /* ... igual que antes ... */
    const validFiles=files.filter(f=>{if(!f.name.endsWith(".java")){showNotification(`${f.name}: Solo .java`,"error");return!1}if(f.size>5*1024*1024){showNotification(`${f.name}: Max 5MB`,"error");return!1}return!0});validFiles.forEach(f=>{if(uploadedFiles.find(u=>u.name===f.name)){showNotification(`${f.name}: Ya subido`,"warning");return}const o={name:f.name,size:formatFileSize(f.size),uploadDate:new Date,file:f};uploadedFiles.push(o);addFileToUI(o);isDirty=!0});updateSubmitButton()
  }
  function addFileToUI(fileObj) { /* ... igual que antes ... */
    const c=document.getElementById("uploadedFiles");if(!c)return;const e=document.createElement("div");e.className="file-item";e.innerHTML=`<div class="file-info"><div class="file-icon"><i class="fab fa-java"></i></div><div class="file-details"><div class="file-name">${fileObj.name}</div><div class="file-size">${fileObj.size}</div></div></div><div class="file-actions"><button class="btn-icon" onclick="previewFile('${fileObj.name}')" title="Vista previa"><i class="fas fa-eye"></i></button><button class="btn-icon danger" onclick="removeFile('${fileObj.name}')" title="Eliminar"><i class="fas fa-trash"></i></button></div>`;c.appendChild(e);showNotification(`Agregado: ${fileObj.name}`,"success")
  }
  function removeFile(fileName) { /* ... igual que antes ... */
    uploadedFiles=uploadedFiles.filter(f=>f.name!==fileName);document.querySelectorAll(".file-item").forEach(e=>{if(e.querySelector(".file-name").textContent===fileName)e.remove()});updateSubmitButton();isDirty=!0;showNotification(`Eliminado: ${fileName}`,"info")
  }
  function previewFile(fileName) { /* ... igual que antes ... */
    const f=uploadedFiles.find(o=>o.name===fileName);if(!f)return;const r=new FileReader;r.onload=e=>showFilePreview(fileName,e.target.result);r.readAsText(f.file)
  }
  function showFilePreview(fileName, content) { /* ... igual que antes ... */
    const m=document.createElement("div");m.className="preview-modal";m.innerHTML=`<div class="modal-overlay" onclick="closePreview()"><div class="modal-content" onclick="event.stopPropagation()"><div class="modal-header"><h3><i class="fab fa-java"></i> ${fileName}</h3><button onclick="closePreview()"><i class="fas fa-times"></i></button></div><div class="modal-body"><pre><code>${content.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre></div></div></div>`;if(!document.querySelector("#preview-modal-styles")){const s=document.createElement("style");s.id="preview-modal-styles";s.textContent=".preview-modal{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000}.modal-overlay{width:100%;height:100%;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;padding:20px}.modal-content{background:white;border-radius:12px;max-width:800px;max-height:80vh;width:100%;display:flex;flex-direction:column}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;border-bottom:1px solid var(--border-light)}.modal-header h3{display:flex;align-items:center;gap:8px;}.modal-header button{background:0 0;border:none;font-size:1.2rem;cursor:pointer;color:var(--text-secondary);padding:5px}.modal-body{padding:20px;overflow:auto;flex:1}.modal-body pre{background:#f0f0f0;padding:15px;border-radius:8px;overflow:auto;font-family:'JetBrains Mono',monospace;font-size:.9rem;line-height:1.4;color:#333}";document.head.appendChild(s)}document.body.appendChild(m);window.closePreview=()=>m.remove()
  }
  function updateSubmitButton() { /* ... igual que antes ... */
    const b=document.getElementById("submitBtn");if(!b)return;if(uploadedFiles.length>0){b.disabled=!1;b.innerHTML='<i class="fas fa-paper-plane"></i> Entregar Actividad'}else{b.disabled=!0;b.innerHTML='<i class="fas fa-paper-plane"></i> Entregar Actividad'}
  }
  function saveDraft() { /* ... igual que antes ... */
    showNotification("Borrador guardado", "success");
    isDirty = false;
    const s=document.querySelector(".save-status span");if(s)s.textContent="Guardado ahora"
  }
  function submitActivity() { /* ... igual que antes ... */
    if(uploadedFiles.length===0){showNotification("Sube al menos un archivo","warning");return}if(confirm("¿Seguro que quieres entregar?")){showNotification("Entregando...","info");setTimeout(()=>{showNotification("¡Actividad entregada!","success");isDirty=!1;const b=document.getElementById("submitBtn");b.disabled=!0;b.innerHTML='<i class="fas fa-check"></i> Entregada';setTimeout(navigateToActivities,1500)},1500)}
  }
  // --- Fin Funciones Upload ---

  // --- Funciones IDE ---
  function setupCodeEditor() {
    const codeInput = document.getElementById("codeInput");
    if (!codeInput) return;
    codeContent = codeInput.value || getInitialCode(); // Carga inicial o default
    codeInput.value = codeContent; // Asegura que el textarea tenga el contenido
    requestAnimationFrame(updateLineNumbers);
    requestAnimationFrame(syncEditorScroll);
  }

  function handleCodeChange(event) {
    codeContent = event.target.value;
    isDirty = true;
    requestAnimationFrame(updateLineNumbers); // Usa rAF para eficiencia
    // Auto-save (igual que antes)
    clearTimeout(window.autoSaveTimer);
    window.autoSaveTimer=setTimeout(autoSave,30000);
    // Actualizar info de línea/columna (simulado)
    const cursorPos = event.target.selectionStart;
    const textUpToCursor = event.target.value.substring(0, cursorPos);
    const lineNum = textUpToCursor.split('\n').length;
    const lineStartPos = textUpToCursor.lastIndexOf('\n') + 1;
    const colNum = cursorPos - lineStartPos + 1;
    const editorInfo = document.querySelector('.editor-info');
    if (editorInfo) {
        editorInfo.children[0].textContent = `Ln ${lineNum}, Col ${colNum}`;
    }
  }

  function updateLineNumbers() {
    const codeInput = document.getElementById("codeInput");
    const lineNumbers = document.getElementById("lineNumbers");
    if (!codeInput || !lineNumbers) return;
    const lines = codeInput.value.split("\n").length;
    const numbersHtml = Array.from({ length: Math.max(lines, 1) }, (_, i) => `<span>${i + 1}</span>`).join(""); // Asegura al menos 1 línea
    lineNumbers.innerHTML = numbersHtml;
    // Sincroniza scroll después de actualizar números
    syncEditorScroll();
  }

  function syncEditorScroll() {
      const codeInput = document.getElementById("codeInput");
      const lineNumbers = document.getElementById("lineNumbers");
      if (!codeInput || !lineNumbers) return;
      lineNumbers.scrollTop = codeInput.scrollTop;
  }


  function runTests() { /* ... igual que antes ... */
    showNotification("Ejecutando casos de prueba...","info");setTimeout(()=>{const t=document.querySelectorAll(".test-case");t.forEach((c,i)=>{const s=c.querySelector(".test-status");setTimeout(()=>{const p=Math.random()>.3;s.className=`test-status ${p?"passed":"failed"}`;s.innerHTML=p?'<i class="fas fa-check"></i> Aprobado':'<i class="fas fa-times"></i> Falló'},i*300)});addConsoleMessage("Ejecutando casos de prueba...","info");setTimeout(()=>{addConsoleMessage("Caso 1: APROBADO ✓","success");addConsoleMessage("Caso 2: APROBADO ✓","success");addConsoleMessage("Todos los casos pasaron!","success")},800)},500)
  }
  function addConsoleMessage(message, type = "info") { /* ... igual que antes ... */
    const c=document.getElementById("consoleOutput");if(!c)return;const t=new Date().toLocaleTimeString();const l=document.createElement("div");l.className=`console-line ${type}`;l.innerHTML=`<span class="timestamp">[${t}]</span><span class="message">${message}</span>`;c.appendChild(l);c.scrollTop=c.scrollHeight
  }
  function clearConsole() { /* ... igual que antes ... */
    const c=document.getElementById("consoleOutput");if(c)c.innerHTML=`<div class="console-line info"><span class="timestamp">[${new Date().toLocaleTimeString()}]</span><span class="message">Consola limpiada</span></div>`
  }
  function formatCode() { /* ... igual que antes ... */
    showNotification("Código formateado (simulado)", "success");addConsoleMessage("Código formateado","info")
  }
  function resetCode() { /* ... igual que antes ... */
    if(confirm("¿Restablecer código?")){const c=document.getElementById("codeInput");if(c){c.value=getInitialCode();codeContent=c.value;updateLineNumbers();isDirty=!0;showNotification("Código restablecido","info")}}
  }
  function getInitialCode() { /* ... igual que antes ... */
    return`import java.util.Scanner;\n\npublic class TablaMultiplicar {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        \n        System.out.print("Ingresa un número: ");\n        int numero = scanner.nextInt();\n\n        System.out.println("\\nTabla del " + numero + ":");\n\n        // TODO: Implementa la tabla de multiplicar aquí\n        for (int i = 1; i <= 10; i++) {\n            System.out.println(numero + " x " + i + " = " + (numero * i)); // Ejemplo\n        }\n\n        scanner.close();\n    }\n}`
  }
  function autoSave() { /* ... igual que antes ... */
    if(isDirty){saveDraft();addConsoleMessage("Auto-guardado","info")}
  }

  // --- CAMBIO: Nuevas funciones para botones IDE ---
  function handleRunCode() {
      showNotification("Ejecutando código...", "info");
      addConsoleMessage("Compilando...", "info");
      // Simular compilación y ejecución
      setTimeout(() => {
          addConsoleMessage("Compilación exitosa ✓", "success");
          addConsoleMessage("--- Salida del Programa ---", "system"); // Nuevo tipo
          // Simular salida basada en el código de ejemplo
          const codeInput = document.getElementById("codeInput");
          const numeroMatch = codeInput.value.match(/int numero = (\d+);/); // Intenta obtener número del código
          const numero = numeroMatch ? parseInt(numeroMatch[1]) : 5; // Usa 5 si no lo encuentra

          for (let i = 1; i <= 10; i++) {
              addConsoleMessage(`${numero} x ${i} = ${numero * i}`);
          }
          addConsoleMessage("--- Fin de la Salida ---", "system");
      }, 1000);
  }

  function handleAiHint() {
      showNotification("Generando pista con IA...", "info");
      // Simular petición a IA
      setTimeout(() => {
          const hints = [
              "Recuerda cómo funciona el ciclo 'for'. Necesitas una variable que vaya de 1 a 10.",
              "Dentro del ciclo, ¿cómo imprimes el formato 'numero x i = resultado'?",
              "La operación matemática es simple: numero multiplicado por el contador del ciclo (i).",
              "Asegúrate de usar System.out.println() para imprimir cada línea de la tabla."
          ];
          const randomHint = hints[Math.floor(Math.random() * hints.length)];
          addConsoleMessage(`💡 Pista IA: ${randomHint}`, "warning"); // Usar tipo warning para destacar
          showNotification("Pista generada en la consola", "success");
      }, 1500);
  }

  function handleSubmitIde() {
      if (confirm("¿Estás seguro de que quieres enviar tu código para evaluación final?")) {
          showNotification("Enviando código...", "info");
          addConsoleMessage("Enviando para evaluación final...", "info");
          isDirty = false; // Marcar como no sucio al enviar
          // Simular envío y redirección
          setTimeout(() => {
              showNotification("¡Código enviado exitosamente!", "success");
              setTimeout(navigateToActivities, 1500); // Volver a la lista
          }, 1500);
      }
  }
  // --- Fin Funciones IDE ---


  function navigateToActivities() {
    showNotification("Regresando a actividades...", "info");
    setTimeout(() => {
      // CAMBIO: Apunta a 5_activities.html
      window.location.href = '5_activities.html';
    }, 500); // Reducido delay
  }

  // Utility functions
  function formatFileSize(bytes) { /* ... igual que antes ... */ return bytes===0?"0 Bytes":(k=1024,s=["Bytes","KB","MB"],i=Math.floor(Math.log(bytes)/Math.log(k)),parseFloat((bytes/Math.pow(k,i)).toFixed(2))+" "+s[i]) }
  function showNotification(message, type = "info") { /* ... igual que antes ... */ document.querySelectorAll(".notification.show").forEach(hideNotification);const n=document.createElement("div");n.className=`notification ${type}`;const i={success:"fa-check-circle",warning:"fa-exclamation-triangle",error:"fa-times-circle",info:"fa-info-circle"};n.innerHTML=`<div class="notification-content"><i class="fas ${i[type]||i.info}"></i><span>${message}</span></div><button class="notification-close"><i class="fas fa-times"></i></button>`;if(!document.querySelector("#notification-styles")){const s=document.createElement("style");s.id="notification-styles";s.textContent=`.notification{position:fixed;top:${70+20}px;right:20px;background:white;border-radius:8px;padding:12px 18px;box-shadow:var(--shadow-medium);display:flex;align-items:center;justify-content:space-between;gap:15px;z-index:1001;min-width:280px;max-width:350px;transform:translateX(110%);opacity:0;transition:transform .4s ease-out,opacity .4s ease-out;border-left:5px solid var(--primary-blue)}.notification.success{border-left-color:var(--success)}.notification.warning{border-left-color:var(--warning)}.notification.error{border-left-color:var(--error)}.notification.show{transform:translateX(0);opacity:1}.notification-content{display:flex;align-items:center;gap:10px;flex:1;min-width:0}.notification-content i{font-size:1.1rem;color:var(--primary-blue);flex-shrink:0}.notification.success .notification-content i{color:var(--success)}.notification.warning .notification-content i{color:var(--warning)}.notification.error .notification-content i{color:var(--error)}.notification-content span{font-weight:500;color:var(--text-primary);font-size:.9rem;white-space:normal;word-break:break-word}.notification-close{background:0 0;border:none;color:var(--text-secondary);cursor:pointer;padding:5px;margin-left:10px;border-radius:5px;transition:background .2s ease;flex-shrink:0}.notification-close:hover{background:var(--neutral-light);color:var(--text-primary)}`;document.head.appendChild(s)}document.body.appendChild(n);requestAnimationFrame(()=>n.classList.add("show"));const c=n.querySelector(".notification-close");let a=setTimeout(()=>hideNotification(n),4e3);c.addEventListener("click",()=>{clearTimeout(a);hideNotification(n)}) }
  function hideNotification(notification) { /* ... igual que antes ... */ if(!notification)return;notification.classList.remove("show");notification.addEventListener("transitionend",()=>{if(notification.parentNode)notification.parentNode.removeChild(notification)},{once:!0}) }

  // Eventos de teclado para desarrollo (sin cambios)
  document.addEventListener("keydown", function (event) { /* ... */ });
  window.ActivityView = { /* ... */ };

  console.log("🚀 Vista Individual de Actividad cargada completamente (IDE Rediseñado)");

</script>

    </body>
</html>