<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scoreboard | C√≥digo para Todos</title>

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <style>
      /* CSS se copiar√° aqu√≠ */
      /* Scoreboard CSS - C√≥digo para Todos */

      :root {
        --primary-blue: #4a90e2;
        --primary-green: #7ed321;
        --accent-pink: #ff6b9d;
        --accent-yellow: #f5a623;
        --java-color: #ed8b00;
        --python-color: #3776ab;
        --web-color: #e44d26;
        --success: #27ae60;
        --warning: #f39c12;
        --error: #e74c3c;

        --text-primary: #2c3e50;
        --text-secondary: #7f8c8d;
        --background-light: #f8f9fa;
        --neutral-light: #ecf0f1;
        --border-light: #e9ecef;

        --shadow-light: 0 2px 4px rgba(0, 0, 0, 0.1);
        --shadow-medium: 0 4px 12px rgba(0, 0, 0, 0.15);
        --shadow-heavy: 0 8px 24px rgba(0, 0, 0, 0.2);
        --border-radius: 12px;
        --transition: all 0.3s ease;

        --nav-height: 70px;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
        background: var(--background-light);
        color: var(--text-primary);
        line-height: 1.6;
        padding-top: var(--nav-height);
      }

      /* Main Navigation */
      /* Navbar Unificado */
      .navbar {
        background: white;
        box-shadow: var(--shadow-light);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        margin: 0;
        padding: 0;
        z-index: 100;
        height: var(--nav-height);
      }

      .nav-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 20px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        height: 100%;
      }

      .nav-logo {
        display: flex;
        align-items: center;
        gap: 12px;
        font-weight: 700;
        font-size: 1.2rem;
        color: var(--primary-blue);
        flex-shrink: 0;
      }

      .logo-icon {
        width: 40px;
        height: 40px;
        background: linear-gradient(135deg, var(--primary-blue), var(--primary-green));
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.2rem;
      }

      .nav-menu {
        display: flex;
        gap: 30px;
        flex: 1;
        justify-content: center;
        min-width: 0;
      }

      .nav-link {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 16px;
        color: var(--text-secondary);
        text-decoration: none;
        font-weight: 500;
        font-size: 0.95rem;
        border-radius: 8px;
        transition: var(--transition);
        position: relative;
        white-space: nowrap;
      }

      .nav-link:hover {
        color: var(--primary-blue);
        background: var(--neutral-light);
      }

      .nav-link.active {
        color: var(--primary-blue);
        background: linear-gradient(135deg, rgba(74, 144, 226, 0.1), rgba(126, 211, 33, 0.1));
      }

      .nav-link i {
        font-size: 1.1rem;
      }

      .nav-profile-link {
        text-decoration: none;
        flex-shrink: 0;
      }

      .nav-profile {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 8px 12px;
        border-radius: 10px;
        transition: var(--transition);
        cursor: pointer;
      }

      .nav-profile:hover {
        background: var(--neutral-light);
      }

      .profile-info {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        line-height: 1.3;
      }

      .user-name {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 0.95rem;
      }

      .user-level {
        font-size: 0.85rem;
        color: var(--text-secondary);
      }

      .profile-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid var(--primary-blue);
      }

      .profile-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      /* Scoreboard Header */
      .scoreboard-header {
        background: linear-gradient(
          135deg,
          var(--primary-blue),
          var(--primary-green)
        );
        padding: 40px 30px;
        margin-bottom: 30px;
      }

      .header-content {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .header-title h1 {
        display: flex;
        align-items: center;
        gap: 15px;
        font-size: 2.5rem;
        color: white;
        margin-bottom: 8px;
      }

      .header-title p {
        font-size: 1.1rem;
        color: rgba(255, 255, 255, 0.9);
      }

      .course-selector {
        display: flex;
        align-items: center;
        gap: 15px;
        background: white;
        padding: 15px 20px;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-medium);
      }

      .course-selector label {
        font-weight: 600;
        color: var(--text-primary);
      }

      .course-select {
        padding: 10px 15px;
        border: 2px solid var(--border-light);
        border-radius: 8px;
        background: white;
        color: var(--text-primary);
        font-weight: 500;
        font-size: 0.95rem;
        cursor: pointer;
        min-width: 300px;
        transition: var(--transition);
      }

      .course-select:hover {
        border-color: var(--primary-blue);
      }

      .course-select:focus {
        outline: none;
        border-color: var(--primary-blue);
      }

      /* Main Content */
      .scoreboard-content {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 30px 50px;
      }

      /* Stats Cards */
      .stats-cards {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
        margin-bottom: 30px;
      }

      .stat-card {
        background: white;
        border-radius: var(--border-radius);
        padding: 25px;
        box-shadow: var(--shadow-light);
        display: flex;
        align-items: center;
        gap: 20px;
        transition: var(--transition);
      }

      .stat-card:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-medium);
      }

      .stat-icon {
        width: 60px;
        height: 60px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8rem;
        color: white;
      }

      .stat-icon.total {
        background: var(--primary-blue);
      }

      .stat-icon.position {
        background: linear-gradient(135deg, #ffd700, #ffa500);
      }

      .stat-icon.stars {
        background: var(--accent-yellow);
      }

      .stat-icon.leader {
        background: var(--primary-green);
      }

      .stat-info {
        display: flex;
        flex-direction: column;
      }

      .stat-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--text-primary);
      }

      .stat-label {
        font-size: 0.9rem;
        color: var(--text-secondary);
      }

      /* Ranking Controls */
      .ranking-controls {
        background: white;
        border-radius: var(--border-radius);
        padding: 20px 25px;
        margin-bottom: 25px;
        box-shadow: var(--shadow-light);
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .time-tabs {
        display: flex;
        gap: 10px;
      }

      .time-tab {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 20px;
        border: 2px solid var(--border-light);
        border-radius: 8px;
        background: white;
        color: var(--text-secondary);
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
      }

      .time-tab:hover {
        border-color: var(--primary-blue);
        color: var(--primary-blue);
      }

      .time-tab.active {
        background: var(--primary-blue);
        border-color: var(--primary-blue);
        color: white;
      }

      .filter-select {
        padding: 10px 15px;
        border: 2px solid var(--border-light);
        border-radius: 8px;
        background: white;
        color: var(--text-secondary);
        font-weight: 500;
        cursor: pointer;
        transition: var(--transition);
      }

      .filter-select:hover {
        border-color: var(--primary-blue);
      }

      .filter-select:focus {
        outline: none;
        border-color: var(--primary-blue);
      }

      /* Course Info Banner */
      .course-info-banner {
        background: white;
        border-radius: var(--border-radius);
        padding: 20px 25px;
        margin-bottom: 25px;
        box-shadow: var(--shadow-light);
      }

      .course-banner-content {
        display: flex;
        align-items: center;
        gap: 20px;
      }

      .course-banner-icon {
        width: 60px;
        height: 60px;
        border-radius: 12px;
        background: var(--java-color);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2rem;
        color: white;
      }

      .course-banner-icon.web {
        background: var(--web-color);
      }

      .course-banner-icon.python {
        background: var(--python-color);
      }

      .course-banner-text {
        flex: 1;
      }

      .course-banner-text h3 {
        font-size: 1.3rem;
        color: var(--text-primary);
        margin-bottom: 5px;
      }

      .course-banner-text p {
        font-size: 0.9rem;
        color: var(--text-secondary);
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .course-banner-text p i {
        margin-right: 5px;
      }

      .ranking-type-badge {
        padding: 10px 20px;
        border-radius: 20px;
        font-weight: 600;
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .ranking-type-badge.group {
        background: rgba(74, 144, 226, 0.15);
        color: var(--primary-blue);
      }

      .ranking-type-badge.open {
        background: rgba(126, 211, 33, 0.15);
        color: var(--primary-green);
      }

      /* Rankings Table */
      .rankings-container {
        background: white;
        border-radius: var(--border-radius);
        padding: 25px;
        box-shadow: var(--shadow-light);
        margin-bottom: 30px;
      }

      .rankings-table {
        display: flex;
        flex-direction: column;
      }

      .table-header {
        display: grid;
        grid-template-columns: 80px 1fr 120px 120px 120px 100px 120px;
        gap: 15px;
        padding: 15px 20px;
        background: var(--neutral-light);
        border-radius: 8px;
        font-weight: 700;
        font-size: 0.85rem;
        color: var(--text-secondary);
        text-transform: uppercase;
        margin-bottom: 10px;
      }

      .table-body {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .ranking-row {
        display: grid;
        grid-template-columns: 80px 1fr 120px 120px 120px 100px 120px;
        gap: 15px;
        padding: 15px 20px;
        background: var(--neutral-light);
        border-radius: 10px;
        align-items: center;
        transition: var(--transition);
        border: 2px solid transparent;
      }

      .ranking-row:hover {
        background: white;
        box-shadow: var(--shadow-light);
        transform: translateX(5px);
      }

      .ranking-row.current-user {
        background: linear-gradient(
          135deg,
          rgba(74, 144, 226, 0.1),
          rgba(126, 211, 33, 0.05)
        );
        border-color: var(--primary-blue);
        box-shadow: var(--shadow-light);
      }

      .rank-position {
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        font-weight: 700;
        color: var(--text-primary);
      }

      .rank-medal {
        font-size: 1.8rem;
      }

      .student-info {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      .student-avatar {
        position: relative;
      }

      .student-avatar img {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        border: 2px solid var(--border-light);
      }

      .student-avatar.rank-1 img {
        border-color: #ffd700;
      }

      .student-avatar.rank-2 img {
        border-color: #c0c0c0;
      }

      .student-avatar.rank-3 img {
        border-color: #cd7f32;
      }

      .student-details {
        display: flex;
        flex-direction: column;
      }

      .student-name {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 0.95rem;
      }

      .student-level {
        font-size: 0.8rem;
        color: var(--text-secondary);
      }

      .col-stars,
      .col-activities,
      .col-time {
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 600;
        color: var(--text-primary);
      }

      .col-stars i {
        color: var(--accent-yellow);
      }

      .col-activities i {
        color: var(--primary-blue);
      }

      .col-time i {
        color: var(--primary-green);
      }

      .streak-indicator {
        display: flex;
        align-items: center;
        gap: 6px;
        font-weight: 600;
      }

      .streak-indicator.active {
        color: var(--error);
      }

      .streak-indicator.inactive {
        color: var(--text-secondary);
      }

      .view-profile-btn {
        padding: 8px 16px;
        border: 2px solid var(--primary-blue);
        border-radius: 8px;
        background: white;
        color: var(--primary-blue);
        font-weight: 600;
        font-size: 0.85rem;
        cursor: pointer;
        transition: var(--transition);
      }

      .view-profile-btn:hover {
        background: var(--primary-blue);
        color: white;
      }

      /* Nearby Section */
      .nearby-section {
        background: white;
        border-radius: var(--border-radius);
        padding: 30px;
        box-shadow: var(--shadow-light);
      }

      .nearby-section h3 {
        display: flex;
        align-items: center;
        gap: 10px;
        font-size: 1.3rem;
        color: var(--text-primary);
        margin-bottom: 8px;
      }

      .section-description {
        font-size: 0.95rem;
        color: var(--text-secondary);
        margin-bottom: 25px;
      }

      .nearby-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
      }

      .nearby-card {
        background: var(--neutral-light);
        border-radius: var(--border-radius);
        padding: 20px;
        text-align: center;
        transition: var(--transition);
        border: 2px solid transparent;
      }

      .nearby-card:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-light);
      }

      .nearby-card.current {
        border-color: var(--primary-blue);
        background: rgba(74, 144, 226, 0.1);
      }

      .nearby-card-rank {
        font-size: 2rem;
        font-weight: 700;
        color: var(--primary-blue);
        margin-bottom: 15px;
      }

      .nearby-card-avatar img {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        border: 3px solid var(--border-light);
        margin-bottom: 15px;
      }

      .nearby-card-name {
        font-weight: 600;
        font-size: 1.1rem;
        color: var(--text-primary);
        margin-bottom: 5px;
      }

      .nearby-card-level {
        font-size: 0.85rem;
        color: var(--text-secondary);
        margin-bottom: 15px;
      }

      .nearby-card-stats {
        display: flex;
        justify-content: center;
        gap: 15px;
        font-size: 0.9rem;
      }

      .nearby-stat {
        display: flex;
        align-items: center;
        gap: 5px;
        color: var(--text-secondary);
      }

      .nearby-stat i {
        color: var(--accent-yellow);
      }

      /* Toast Notification */
      .toast-notification {
        position: fixed;
        top: 90px;
        right: 20px;
        background: white;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-heavy);
        padding: 15px 20px;
        display: flex;
        align-items: center;
        gap: 12px;
        z-index: 1100;
        transform: translateX(400px);
        opacity: 0;
        transition: all 0.3s ease;
      }

      .toast-notification.show {
        transform: translateX(0);
        opacity: 1;
      }

      .toast-content {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .toast-icon {
        font-size: 1.2rem;
        color: var(--success);
      }

      .toast-message {
        font-weight: 500;
        color: var(--text-primary);
      }

      .toast-close {
        background: none;
        border: none;
        color: var(--text-secondary);
        cursor: pointer;
        padding: 5px;
        font-size: 1rem;
      }

      /* Responsive Design */
      @media (max-width: 1200px) {
        .stats-cards {
          grid-template-columns: repeat(2, 1fr);
        }

        .nearby-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (max-width: 768px) {
        .nav-links {
          display: none;
        }

        .header-content {
          flex-direction: column;
          gap: 20px;
        }

        .course-selector {
          width: 100%;
        }

        .course-select {
          width: 100%;
          min-width: auto;
        }

        .stats-cards {
          grid-template-columns: 1fr;
        }

        .ranking-controls {
          flex-direction: column;
          gap: 15px;
        }

        .time-tabs {
          width: 100%;
          flex-wrap: wrap;
        }

        .ranking-filters {
          width: 100%;
        }

        .filter-select {
          width: 100%;
        }

        .table-header {
          display: none;
        }

        .ranking-row {
          grid-template-columns: 1fr;
          gap: 10px;
        }

        .rank-position {
          position: absolute;
          top: 10px;
          left: 10px;
          font-size: 1rem;
        }

        .student-info {
          margin-bottom: 10px;
        }

        .col-stars,
        .col-activities,
        .col-time,
        .streak-indicator {
          justify-content: flex-start;
        }

        .view-profile-btn {
          width: 100%;
        }

        .nearby-grid {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 480px) {
        .scoreboard-content {
          padding: 0 15px 30px;
        }

        .header-title h1 {
          font-size: 1.8rem;
        }

        .stat-value {
          font-size: 1.5rem;
        }

        .time-tab {
          flex: 1;
          justify-content: center;
          padding: 10px;
          font-size: 0.85rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Main Navigation -->
    <!-- Navbar Unificado -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <div class="logo-icon">
                    <i class="fas fa-code"></i>
                </div>
                <span>C√≥digo para Todos</span>
            </div>

            <div class="nav-menu">
                <a href="2_dashboardEstudiante2.html" class="nav-link">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </a>
                <a href="course_general.html" class="nav-link">
                    <i class="fas fa-book"></i>
                    <span>Mis Cursos</span>
                </a>
                <a href="activities_general.html" class="nav-link">
                    <i class="fas fa-pencil-alt"></i>
                    <span>Actividades</span>
                </a>
                <a href="competition_home.html" class="nav-link">
                    <i class="fas fa-trophy"></i>
                    <span>Competencias</span>
                </a>
                <a href="12_scoreboard.html" class="nav-link active">
                    <i class="fas fa-ranking-star"></i>
                    <span>Clasificaci√≥n</span>
                </a>
            </div>

            <a href="11_profile.html" class="nav-profile-link">
                <div class="nav-profile">
                    <div class="profile-info">
                        <span class="user-name">Ana Garc√≠a</span>
                        <span class="user-level">Mi Perfil</span>
                    </div>
                    <div class="profile-avatar">
                        <img src="https://ui-avatars.com/api/?name=Ana+Garcia&background=4A90E2&color=fff&size=40" alt="Ana Garc√≠a">
                    </div>
                </div>
            </a>
        </div>
    </nav>

    <!-- Scoreboard Header -->
    <div class="scoreboard-header">
      <div class="header-content">
        <div class="header-title">
          <h1><i class="fas fa-trophy"></i> Scoreboard</h1>
          <p>Compite con tus compa√±eros y alcanza el top</p>
        </div>

        <div class="course-selector">
          <label for="courseSelect">Curso:</label>
          <select id="courseSelect" class="course-select">
            <option value="java">Java Fundamentos - Grupo ITESM</option>
            <option value="web">Desarrollo Web - Ranking Abierto</option>
            <option value="python">Python B√°sico - Ranking Abierto</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="scoreboard-content">
      <!-- Stats Cards -->
      <div class="stats-cards">
        <div class="stat-card">
          <div class="stat-icon total">
            <i class="fas fa-users"></i>
          </div>
          <div class="stat-info">
            <span class="stat-value" id="totalStudents">28</span>
            <span class="stat-label">Estudiantes</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon position">
            <i class="fas fa-medal"></i>
          </div>
          <div class="stat-info">
            <span class="stat-value" id="yourPosition">#3</span>
            <span class="stat-label">Tu Posici√≥n</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon stars">
            <i class="fas fa-star"></i>
          </div>
          <div class="stat-info">
            <span class="stat-value" id="yourStars">127</span>
            <span class="stat-label">Tus Estrellas</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon leader">
            <i class="fas fa-crown"></i>
          </div>
          <div class="stat-info">
            <span class="stat-value" id="leaderStars">245</span>
            <span class="stat-label">L√≠der</span>
          </div>
        </div>
      </div>

      <!-- Filters and Tabs -->
      <div class="ranking-controls">
        <div class="time-tabs">
          <button class="time-tab active" data-period="week">
            <i class="fas fa-calendar-week"></i>
            Semana
          </button>
          <button class="time-tab" data-period="month">
            <i class="fas fa-calendar-alt"></i>
            Mes
          </button>
          <button class="time-tab" data-period="all">
            <i class="fas fa-infinity"></i>
            Todo
          </button>
        </div>

        <div class="ranking-filters">
          <select class="filter-select" id="sortBy">
            <option value="stars">Ordenar por Estrellas</option>
            <option value="activities">Ordenar por Actividades</option>
            <option value="time">Ordenar por Tiempo</option>
          </select>
        </div>
      </div>

      <!-- Course Info Banner -->
      <div class="course-info-banner" id="courseInfoBanner">
        <div class="course-banner-content">
          <div class="course-banner-icon">
            <i class="fab fa-java"></i>
          </div>
          <div class="course-banner-text">
            <h3>Java Fundamentos</h3>
            <p>
              <i class="fas fa-users"></i> Grupo ITESM ‚Ä¢
              <i class="fas fa-chalkboard-teacher"></i> Dr. Fernando Castillo
            </p>
          </div>
          <div class="ranking-type-badge group">
            <i class="fas fa-users-cog"></i>
            Ranking Grupal
          </div>
        </div>
      </div>

      <!-- Rankings Table -->
      <div class="rankings-container">
        <div class="rankings-table">
          <div class="table-header">
            <div class="col-rank">Pos</div>
            <div class="col-student">Estudiante</div>
            <div class="col-stars">Estrellas</div>
            <div class="col-activities">Actividades</div>
            <div class="col-time">Tiempo</div>
            <div class="col-streak">Racha</div>
            <div class="col-action">Acci√≥n</div>
          </div>

          <div class="table-body" id="rankingsTableBody">
            <!-- Rankings will be populated here -->
          </div>
        </div>
      </div>

      <!-- Nearby Competitors -->
      <div class="nearby-section">
        <h3><i class="fas fa-crosshairs"></i> Compa√±eros Cercanos</h3>
        <p class="section-description">Estudiantes cerca de tu posici√≥n</p>

        <div class="nearby-grid" id="nearbyGrid">
          <!-- Will be populated dynamically -->
        </div>
      </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast-notification" id="toastNotification">
      <div class="toast-content">
        <i class="toast-icon fas fa-check-circle"></i>
        <span class="toast-message">Acci√≥n completada</span>
      </div>
      <button class="toast-close">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <script>
      /* JavaScript se copiar√° aqu√≠ */
      // Scoreboard JavaScript - C√≥digo para Todos

      // Estado global
      let currentCourse = "java";
      let currentPeriod = "week";
      let currentSort = "stars";

      // Datos de estudiantes por curso
      const coursesData = {
        java: {
          name: "Java Fundamentos",
          icon: "fab fa-java",
          type: "group",
          teacher: "Dr. Fernando Castillo",
          group: "Grupo ITESM",
          totalStudents: 28,
          students: [
            {
              id: 1,
              name: "Carlos Ruiz",
              level: "Avanzado",
              stars: 245,
              activities: 20,
              time: 142,
              streak: 12,
              avatar:
                "https://ui-avatars.com/api/?name=Carlos+Ruiz&background=7ED321&color=fff",
            },
            {
              id: 2,
              name: "Mar√≠a L√≥pez",
              level: "Intermedio",
              stars: 198,
              activities: 18,
              time: 120,
              streak: 8,
              avatar:
                "https://ui-avatars.com/api/?name=Maria+Lopez&background=FF6B9D&color=fff",
            },
            {
              id: 3,
              name: "Ana Garc√≠a",
              level: "Intermedio",
              stars: 127,
              activities: 15,
              time: 89,
              streak: 7,
              avatar:
                "https://ui-avatars.com/api/?name=Ana+Garcia&background=4A90E2&color=fff",
              currentUser: true,
            },
            {
              id: 4,
              name: "Diego Morales",
              level: "Intermedio",
              stars: 115,
              activities: 14,
              time: 78,
              streak: 5,
              avatar:
                "https://ui-avatars.com/api/?name=Diego+Morales&background=F5A623&color=fff",
            },
            {
              id: 5,
              name: "Sof√≠a Mart√≠nez",
              level: "Principiante",
              stars: 98,
              activities: 12,
              time: 67,
              streak: 0,
              avatar:
                "https://ui-avatars.com/api/?name=Sofia+Martinez&background=E74C3C&color=fff",
            },
            {
              id: 6,
              name: "Luis Hern√°ndez",
              level: "Intermedio",
              stars: 89,
              activities: 11,
              time: 56,
              streak: 3,
              avatar:
                "https://ui-avatars.com/api/?name=Luis+Hernandez&background=9B59B6&color=fff",
            },
            {
              id: 7,
              name: "Andrea Torres",
              level: "Avanzado",
              stars: 85,
              activities: 10,
              time: 54,
              streak: 9,
              avatar:
                "https://ui-avatars.com/api/?name=Andrea+Torres&background=1ABC9C&color=fff",
            },
            {
              id: 8,
              name: "Jorge Silva",
              level: "Intermedio",
              stars: 76,
              activities: 9,
              time: 48,
              streak: 0,
              avatar:
                "https://ui-avatars.com/api/?name=Jorge+Silva&background=3498DB&color=fff",
            },
            {
              id: 9,
              name: "Valeria G√≥mez",
              level: "Principiante",
              stars: 67,
              activities: 8,
              time: 42,
              streak: 2,
              avatar:
                "https://ui-avatars.com/api/?name=Valeria+Gomez&background=E67E22&color=fff",
            },
            {
              id: 10,
              name: "Roberto P√©rez",
              level: "Avanzado",
              stars: 54,
              activities: 7,
              time: 38,
              streak: 6,
              avatar:
                "https://ui-avatars.com/api/?name=Roberto+Perez&background=27AE60&color=fff",
            },
          ],
        },
        web: {
          name: "Desarrollo Web",
          icon: "fas fa-code",
          type: "open",
          totalStudents: 1234,
          students: [
            {
              id: 1,
              name: "Pedro Ram√≠rez",
              level: "Avanzado",
              stars: 456,
              activities: 45,
              time: 230,
              streak: 15,
              avatar:
                "https://ui-avatars.com/api/?name=Pedro+Ramirez&background=7ED321&color=fff",
            },
            {
              id: 2,
              name: "Laura Jim√©nez",
              level: "Avanzado",
              stars: 423,
              activities: 42,
              time: 215,
              streak: 12,
              avatar:
                "https://ui-avatars.com/api/?name=Laura+Jimenez&background=FF6B9D&color=fff",
            },
            {
              id: 3,
              name: "Miguel √Ångel",
              level: "Intermedio",
              stars: 398,
              activities: 38,
              time: 198,
              streak: 10,
              avatar:
                "https://ui-avatars.com/api/?name=Miguel+Angel&background=F5A623&color=fff",
            },
            {
              id: 47,
              name: "Ana Garc√≠a",
              level: "Intermedio",
              stars: 43,
              activities: 8,
              time: 67,
              streak: 4,
              avatar:
                "https://ui-avatars.com/api/?name=Ana+Garcia&background=4A90E2&color=fff",
              currentUser: true,
            },
            {
              id: 48,
              name: "Fernando Rojas",
              level: "Principiante",
              stars: 42,
              activities: 7,
              time: 65,
              streak: 0,
              avatar:
                "https://ui-avatars.com/api/?name=Fernando+Rojas&background=9B59B6&color=fff",
            },
            {
              id: 49,
              name: "Carmen Vega",
              level: "Principiante",
              stars: 41,
              activities: 7,
              time: 63,
              streak: 3,
              avatar:
                "https://ui-avatars.com/api/?name=Carmen+Vega&background=1ABC9C&color=fff",
            },
          ],
        },
        python: {
          name: "Python B√°sico",
          icon: "fab fa-python",
          type: "open",
          totalStudents: 1234,
          students: [
            {
              id: 1,
              name: "Alberto Cruz",
              level: "Avanzado",
              stars: 512,
              activities: 52,
              time: 267,
              streak: 18,
              avatar:
                "https://ui-avatars.com/api/?name=Alberto+Cruz&background=7ED321&color=fff",
            },
            {
              id: 2,
              name: "Patricia Soto",
              level: "Avanzado",
              stars: 487,
              activities: 48,
              time: 245,
              streak: 14,
              avatar:
                "https://ui-avatars.com/api/?name=Patricia+Soto&background=FF6B9D&color=fff",
            },
            {
              id: 892,
              name: "Ana Garc√≠a",
              level: "Principiante",
              stars: 14,
              activities: 2,
              time: 8,
              streak: 2,
              avatar:
                "https://ui-avatars.com/api/?name=Ana+Garcia&background=4A90E2&color=fff",
              currentUser: true,
            },
            {
              id: 893,
              name: "Ricardo Luna",
              level: "Principiante",
              stars: 13,
              activities: 2,
              time: 7,
              streak: 0,
              avatar:
                "https://ui-avatars.com/api/?name=Ricardo+Luna&background=9B59B6&color=fff",
            },
            {
              id: 894,
              name: "Elena Vargas",
              level: "Principiante",
              stars: 12,
              activities: 2,
              time: 6,
              streak: 1,
              avatar:
                "https://ui-avatars.com/api/?name=Elena+Vargas&background=1ABC9C&color=fff",
            },
          ],
        },
      };

      // Inicializaci√≥n
      document.addEventListener("DOMContentLoaded", function () {
        initializeScoreboard();
        setupEventListeners();
        loadCourseData(currentCourse);
        console.log("‚úÖ Scoreboard inicializado");
      });

      function initializeScoreboard() {
        console.log("Scoreboard cargado correctamente");
      }

      function setupEventListeners() {
        // Course selector
        document
          .getElementById("courseSelect")
          ?.addEventListener("change", handleCourseChange);

        // Time tabs
        document.querySelectorAll(".time-tab").forEach((tab) => {
          tab.addEventListener("click", handlePeriodChange);
        });

        // Sort selector
        document
          .getElementById("sortBy")
          ?.addEventListener("change", handleSortChange);

        // Navigation links
        document.querySelectorAll(".nav-link").forEach((link) => {
          link.addEventListener("click", handleNavigation);
        });

        // Toast close
        document
          .querySelector(".toast-close")
          ?.addEventListener("click", hideToast);
      }

      function handleCourseChange(event) {
        const courseId = event.target.value;
        currentCourse = courseId;
        loadCourseData(courseId);
        showToast(`Cargando ranking de ${coursesData[courseId].name}`, "info");
      }

      function handlePeriodChange(event) {
        const tab = event.currentTarget;
        const period = tab.dataset.period;

        document
          .querySelectorAll(".time-tab")
          .forEach((t) => t.classList.remove("active"));
        tab.classList.add("active");

        currentPeriod = period;

        const periodNames = {
          week: "esta semana",
          month: "este mes",
          all: "todo el tiempo",
        };

        loadCourseData(currentCourse);
        showToast(`Mostrando ranking de ${periodNames[period]}`, "info");
      }

      function handleSortChange(event) {
        const sortBy = event.target.value;
        currentSort = sortBy;
        loadCourseData(currentCourse);

        const sortNames = {
          stars: "Estrellas",
          activities: "Actividades",
          time: "Tiempo dedicado",
        };

        showToast(`Ordenando por: ${sortNames[sortBy]}`, "info");
      }

      function loadCourseData(courseId) {
        const course = coursesData[courseId];

        // Update stats
        updateStats(course);

        // Update banner
        updateCourseBanner(course);

        // Sort students
        const sortedStudents = sortStudents([...course.students], currentSort);

        // Render rankings table
        renderRankingsTable(sortedStudents, course);

        // Render nearby competitors
        renderNearbyCompetitors(sortedStudents, course);
      }

      function updateStats(course) {
        const currentUser = course.students.find((s) => s.currentUser);
        const userPosition =
          course.students.findIndex((s) => s.currentUser) + 1;
        const leader = course.students[0];

        document.getElementById("totalStudents").textContent =
          course.totalStudents;
        document.getElementById(
          "yourPosition"
        ).textContent = `#${userPosition}`;
        document.getElementById("yourStars").textContent = currentUser.stars;
        document.getElementById("leaderStars").textContent = leader.stars;
      }

      function updateCourseBanner(course) {
        const banner = document.getElementById("courseInfoBanner");
        const iconClass = course.icon;
        const courseType =
          course.type === "group" ? "Ranking Grupal" : "Ranking Abierto";
        const typeClass = course.type === "group" ? "group" : "open";

        let teacherInfo = "";
        if (course.type === "group") {
          teacherInfo = `<i class="fas fa-users"></i> ${course.group} ‚Ä¢ <i class="fas fa-chalkboard-teacher"></i> ${course.teacher}`;
        } else {
          teacherInfo = `<i class="fas fa-globe"></i> Ranking global ‚Ä¢ <i class="fas fa-users"></i> ${course.totalStudents} estudiantes`;
        }

        banner.innerHTML = `
        <div class="course-banner-content">
            <div class="course-banner-icon">
                <i class="${iconClass}"></i>
            </div>
            <div class="course-banner-text">
                <h3>${course.name}</h3>
                <p>${teacherInfo}</p>
            </div>
            <div class="ranking-type-badge ${typeClass}">
                <i class="fas ${
                  course.type === "group" ? "fa-users-cog" : "fa-globe"
                }"></i>
                ${courseType}
            </div>
        </div>
    `;
      }

      function sortStudents(students, sortBy) {
        return students.sort((a, b) => {
          switch (sortBy) {
            case "activities":
              return b.activities - a.activities;
            case "time":
              return b.time - a.time;
            case "stars":
            default:
              return b.stars - a.stars;
          }
        });
      }

      function renderRankingsTable(students, course) {
        const tableBody = document.getElementById("rankingsTableBody");
        tableBody.innerHTML = "";

        students.forEach((student, index) => {
          const position = index + 1;
          const isCurrentUser = student.currentUser || false;
          const rowClass = isCurrentUser
            ? "ranking-row current-user"
            : "ranking-row";

          let rankDisplay = `<span class="rank-position">${position}</span>`;
          if (position === 1) {
            rankDisplay = `<span class="rank-medal">ü•á</span>`;
          } else if (position === 2) {
            rankDisplay = `<span class="rank-medal">ü•à</span>`;
          } else if (position === 3) {
            rankDisplay = `<span class="rank-medal">ü•â</span>`;
          }

          const streakClass = student.streak > 0 ? "active" : "inactive";
          const streakIcon = student.streak > 0 ? "fa-fire" : "fa-circle";

          const row = document.createElement("div");
          row.className = rowClass;
          row.innerHTML = `
            <div class="col-rank">
                ${rankDisplay}
            </div>
            <div class="col-student">
                <div class="student-info">
                    <div class="student-avatar rank-${position}">
                        <img src="${student.avatar}" alt="${student.name}">
                    </div>
                    <div class="student-details">
                        <span class="student-name">${student.name}</span>
                        <span class="student-level">${student.level}</span>
                    </div>
                </div>
            </div>
            <div class="col-stars">
                <i class="fas fa-star"></i>
                <span>${student.stars}</span>
            </div>
            <div class="col-activities">
                <i class="fas fa-tasks"></i>
                <span>${student.activities}</span>
            </div>
            <div class="col-time">
                <i class="fas fa-clock"></i>
                <span>${student.time}h</span>
            </div>
            <div class="col-streak">
                <span class="streak-indicator ${streakClass}">
                    <i class="fas ${streakIcon}"></i>
                    ${student.streak}
                </span>
            </div>
            <div class="col-action">
                <button class="view-profile-btn" onclick="viewProfile(${student.id})">
                    Ver perfil
                </button>
            </div>
        `;

          tableBody.appendChild(row);
        });
      }

      function renderNearbyCompetitors(students, course) {
        const nearbyGrid = document.getElementById("nearbyGrid");
        const currentUserIndex = students.findIndex((s) => s.currentUser);

        if (currentUserIndex === -1) return;

        // Get 3 before and 3 after (or adjust if at edges)
        const startIndex = Math.max(0, currentUserIndex - 1);
        const endIndex = Math.min(students.length, currentUserIndex + 2);
        const nearbyStudents = students.slice(startIndex, endIndex);

        nearbyGrid.innerHTML = "";

        nearbyStudents.forEach((student, index) => {
          const actualPosition = startIndex + index + 1;
          const isCurrentUser = student.currentUser || false;
          const cardClass = isCurrentUser
            ? "nearby-card current"
            : "nearby-card";

          const card = document.createElement("div");
          card.className = cardClass;
          card.innerHTML = `
            <div class="nearby-card-rank">#${actualPosition}</div>
            <div class="nearby-card-avatar">
                <img src="${student.avatar}" alt="${student.name}">
            </div>
            <div class="nearby-card-name">${student.name}</div>
            <div class="nearby-card-level">${student.level}</div>
            <div class="nearby-card-stats">
                <span class="nearby-stat">
                    <i class="fas fa-star"></i>
                    ${student.stars}
                </span>
                <span class="nearby-stat">
                    <i class="fas fa-tasks"></i>
                    ${student.activities}
                </span>
            </div>
        `;

          nearbyGrid.appendChild(card);
        });
      }

      function viewProfile(studentId) {
        showToast("Funci√≥n de ver perfil pr√≥ximamente", "info");
        console.log(`Ver perfil del estudiante ID: ${studentId}`);
      }

      function handleNavigation(event) {
        //event.preventDefault();
        const link = event.currentTarget;
        const page = link.querySelector("span")?.textContent || "P√°gina";

        document.querySelectorAll(".nav-link").forEach((l) => {
          l.classList.remove("active");
        });

        link.classList.add("active");

        showToast(`Navegando a ${page}`, "info");
      }

      // Toast Notifications
      function showToast(message, type = "info") {
        const toast = document.getElementById("toastNotification");
        const icon = toast.querySelector(".toast-icon");
        const msg = toast.querySelector(".toast-message");

        msg.textContent = message;

        icon.className = "toast-icon fas";
        switch (type) {
          case "success":
            icon.classList.add("fa-check-circle");
            icon.style.color = "var(--success)";
            break;
          case "warning":
            icon.classList.add("fa-exclamation-circle");
            icon.style.color = "var(--warning)";
            break;
          case "error":
            icon.classList.add("fa-times-circle");
            icon.style.color = "var(--error)";
            break;
          case "info":
          default:
            icon.classList.add("fa-info-circle");
            icon.style.color = "var(--primary-blue)";
            break;
        }

        toast.classList.add("show");

        setTimeout(() => {
          hideToast();
        }, 3000);
      }

      function hideToast() {
        const toast = document.getElementById("toastNotification");
        toast.classList.remove("show");
      }
    </script>
  </body>
</html>